<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>TiDB FAQ| PingCAP</title><script type="text/javascript">"/"===location.pathname&&"pingcap.github.io"===location.hostname&&(location.href="/en/")</script><link rel="icon" href="/images/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="canonical" href="https://www.pingcap.com/">
<link rel="alternate" type="application/rss+xml" title="RSS" href="/blog/index.xml" />
<meta name="description" content="PingCAP is focused on developing distributed NewSQL and is the team building TiDB, an open-source distributed NewSQL database.">
<meta name="robots" content="noodp">
<meta name="keywords" content="SQL, HTAP, Open Source, Cloud-Native, NewSQL">
<meta property="og:locale" content="en_US">
<meta property="og:type" content="website">
<meta property="og:title" content="PingCAP">
<meta property="og:description" content="PingCAP is focused on developing distributed NewSQL and is the team building TiDB, an open-source distributed NewSQL database.">
<meta property="og:url" content="https://www.pingcap.com/">
<meta property="og:site_name" content="PingCAP">
<meta property="og:image" content="/images/pingcap-opengraph.jpg">
<meta property="og:image:secure_url" content="/images/pingcap-opengraph.jpg">
<meta name="twitter:card" content="summary">
<meta name="twitter:description" content="PingCAP is focused on developing distributed NewSQL and is the team building TiDB, an open-source distributed NewSQL database.">
<meta name="twitter:title" content="PingCAP">
<meta name="twitter:site" content="@pingcap">
<meta name="twitter:image:src" content="/images/pingcap-opengraph.jpg">
<meta name="twitter:creator" content="@pingcap">

<script type="application/ld+json">
{
  "@context": "http:\/\/schema.org",
  "@type": "WebSite",
  "url": "https:\/\/www.pingcap.com\/",
  "name": "PingCAP",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https:\/\/www.pingcap.com\/?s={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>
 
  
  
  
  
  
  
<link href="/js//css/style.css" rel="stylesheet"></head><body>  

<header role="navigation" class="header fixed-top">
  <div class="container">
    <a class="nav-brand" href="/index.html"><img src="/images/pingcap-logo.png" alt="PingCAP"></a>
    <div class="nav-wrapper">
      <div class="navigations">
        <ul>
          <li class="sel"><a href="/docs-cn/overview/#tidb-%e7%ae%80%e4%bb%8b">文档</a></li>
          <li ><a href="/blog-cn">博客</a></li>
          
          <li ><a href="/about-cn">关于</a></li>
          <li>
            <a class="link-download" href="https://github.com/pingcap/tidb/releases" target="_blank">下载
              <svg
  xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  version="1.1"
  x="0px"
  y="0px"
  viewBox="0 0 512 512"
  xml:space="preserve"
  width="10"
  height="10"
  fill="#fff">
<g>
	<g>
		<path d="M488.727,0H302.545c-12.853,0-23.273,10.42-23.273,23.273c0,12.853,10.42,23.273,23.273,23.273h129.997L192.999,286.09    c-9.089,9.089-9.089,23.823,0,32.912c4.543,4.544,10.499,6.816,16.455,6.816c5.956,0,11.913-2.271,16.457-6.817L465.455,79.458    v129.997c0,12.853,10.42,23.273,23.273,23.273c12.853,0,23.273-10.42,23.273-23.273V23.273C512,10.42,501.58,0,488.727,0z" fill="#eeeeee"/>
	</g>
</g>
<g>
	<g>
		<path d="M395.636,232.727c-12.853,0-23.273,10.42-23.273,23.273v209.455H46.545V139.636H256c12.853,0,23.273-10.42,23.273-23.273    S268.853,93.091,256,93.091H23.273C10.42,93.091,0,103.511,0,116.364v372.364C0,501.58,10.42,512,23.273,512h372.364    c12.853,0,23.273-10.42,23.273-23.273V256C418.909,243.147,408.489,232.727,395.636,232.727z" fill="#eeeeee"/>
	</g>
</g>
</svg>

            </a>
          </li>
        </ul>
      </div>
      <div class="global-search">
        <div class="search-wrapper">
          <span class="icon-search"><svg
	xmlns="http://www.w3.org/2000/svg"
	xmlns:xlink="http://www.w3.org/1999/xlink"
	version="1.1"
	width="18"
	height="18"
	fill="#fff"
	viewBox="0 0 67.125 67.125"
	xml:space="preserve">
	<g>
		<g>
			<path
				d="M23.902,0C11.01,0,0.523,10.488,0.523,23.38c0,12.891,10.487,23.379,23.379,23.379c5.461,0,10.487-1.887,14.471-5.037    l24.816,24.817c0.391,0.391,0.902,0.586,1.414,0.586s1.023-0.195,1.414-0.586c0.781-0.78,0.781-2.048,0-2.828L41.293,38.985    c3.721-4.142,5.989-9.613,5.989-15.605C47.282,10.488,36.794,0,23.902,0z M4.523,23.38C4.523,12.694,13.216,4,23.902,4    c10.687,0,19.38,8.694,19.38,19.38c0,5.396-2.221,10.279-5.791,13.795c-0.175,0.092-0.342,0.202-0.488,0.349    c-0.105,0.105-0.194,0.222-0.271,0.343C33.31,40.9,28.825,42.76,23.903,42.76C13.217,42.759,4.523,34.065,4.523,23.38z"/>
			<path d="M24.075,8.591c-8.25,0-14.962,6.712-14.962,14.962c0,1.104,0.896,2,2,2s2-0.896,2-2c0-6.044,4.918-10.962,10.962-10.962    c1.104,0,2-0.896,2-2S25.18,8.591,24.075,8.591z"/>
		</g>
	</g>
</svg>
</span>
          <style>
     
    .algolia-autocomplete .ds-dropdown-menu {
        position: relative;
        width: 100%;
        box-sizing: border-box;
        border: 1px solid #d9d9d9;
        margin: 4 0 4 0;
        background: #fafafa;
        border-radius: 3px;
        font-size: 16px;
    }
    .algolia-autocomplete .ds-dropdown-menu [class^="ds-dataset-"] {
      border: none!important;
    }

    .algolia-autocomplete .algolia-docsearch-suggestion {
        padding: 0 4px!important;
    }

    .algolia-autocomplete .algolia-docsearch-suggestion--wrapper {
        padding: 4px 0 0!important;
    }

    .algolia-autocomplete .algolia-docsearch-suggestion .algolia-docsearch-suggestion--category-header {
        border-bottom: 1px solid #ddd;
        margin: 0;
        padding: 6px 8px;
        text-transform: uppercase;
        color: #3a59f0;
        font-size: 0.9em;
    }

    .algolia-docsearch-suggestion.algolia-docsearch-suggestion__secondary .algolia-docsearch-suggestion--subcategory-column {
        font-size: 0.7em;
        background: none;
    }

    @media (max-width: 600px) {
      .global-search .algolia-autocomplete .ds-dropdown-menu {
        min-width: 372px !important;
      }

      .global-search .algolia-autocomplete.algolia-autocomplete-right .ds-dropdown-menu {
         right: -38px !important;
       }
    }

    @media (max-width: 375px) {
      .global-search .algolia-autocomplete .ds-dropdown-menu {
        min-width: 350px !important;
      }

      .global-search .algolia-autocomplete.algolia-autocomplete-right .ds-dropdown-menu {
         right: -43px !important;
       }
    }

    @media (max-width: 320px) {
      .global-search .algolia-autocomplete .ds-dropdown-menu {
        min-width: 308px !important;
      }

      .global-search .algolia-autocomplete.algolia-autocomplete-right .ds-dropdown-menu {
         right: -40px !important;
       }
    }
</style>

<input type="search" id="search-input" placeholder="Search...">

        </div>
      </div>
    </div>
    <div class="nav-btn nav-slider">
      <i class="material-icons"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" width="16" height="16" viewBox="0 0 459 459" xml:space="preserve">
<g>
	<g id="menu">
		<path d="M0,382.5h459v-51H0V382.5z M0,255h459v-51H0V255z M0,76.5v51h459v-51H0z" fill="#FFFFFF"/>
	</g>
</g>
</svg>
</i>
    </div>
  </div>
</header>
 


<nav class="mobile-sidebar">
  <div class="nav-header">
    <div class="logo-wrap">
      <a class="nav-brand" href="/en"><img src="/images/pingcap-logo.png" alt="PingCAP"></a>
    </div>
  </div>
  <ul class="ul-base">
    <li class="sel"><a href="/docs-cn/overview">文档</a></li>
    <li ><a href="/blog-cn">博客</a></li>
    
    <li ><a href="/about-cn">关于</a></li>
    <li>
      <a class="link-download" href="https://github.com/pingcap/tidb/releases" target="_blank">下载
        <svg
  xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  version="1.1"
  x="0px"
  y="0px"
  viewBox="0 0 512 512"
  xml:space="preserve"
  width="10"
  height="10"
  fill="#fff">
<g>
	<g>
		<path d="M488.727,0H302.545c-12.853,0-23.273,10.42-23.273,23.273c0,12.853,10.42,23.273,23.273,23.273h129.997L192.999,286.09    c-9.089,9.089-9.089,23.823,0,32.912c4.543,4.544,10.499,6.816,16.455,6.816c5.956,0,11.913-2.271,16.457-6.817L465.455,79.458    v129.997c0,12.853,10.42,23.273,23.273,23.273c12.853,0,23.273-10.42,23.273-23.273V23.273C512,10.42,501.58,0,488.727,0z" fill="#eeeeee"/>
	</g>
</g>
<g>
	<g>
		<path d="M395.636,232.727c-12.853,0-23.273,10.42-23.273,23.273v209.455H46.545V139.636H256c12.853,0,23.273-10.42,23.273-23.273    S268.853,93.091,256,93.091H23.273C10.42,93.091,0,103.511,0,116.364v372.364C0,501.58,10.42,512,23.273,512h372.364    c12.853,0,23.273-10.42,23.273-23.273V256C418.909,243.147,408.489,232.727,395.636,232.727z" fill="#eeeeee"/>
	</g>
</g>
</svg>

      </a>
    </li>
  </ul>
  <div class="nav-footer">
    <div class="contact-list-wrap">
      <div class="flex-list">
        <h4 class="list-title"><strong>Contact</strong></h4>
        <ul class="social social-cn ul-base">
          <li><a href="https://twitter.com/PingCAP" class="twitter" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 612 612" xml:space="preserve" width="18" height="18">
<g>
	<g>
		<path d="M612,116.258c-22.525,9.981-46.694,16.75-72.088,19.772c25.929-15.527,45.777-40.155,55.184-69.411    c-24.322,14.379-51.169,24.82-79.775,30.48c-22.907-24.437-55.49-39.658-91.63-39.658c-69.334,0-125.551,56.217-125.551,125.513    c0,9.828,1.109,19.427,3.251,28.606C197.065,206.32,104.556,156.337,42.641,80.386c-10.823,18.51-16.98,40.078-16.98,63.101    c0,43.559,22.181,81.993,55.835,104.479c-20.575-0.688-39.926-6.348-56.867-15.756v1.568c0,60.806,43.291,111.554,100.693,123.104    c-10.517,2.83-21.607,4.398-33.08,4.398c-8.107,0-15.947-0.803-23.634-2.333c15.985,49.907,62.336,86.199,117.253,87.194    c-42.947,33.654-97.099,53.655-155.916,53.655c-10.134,0-20.116-0.612-29.944-1.721c55.567,35.681,121.536,56.485,192.438,56.485    c230.948,0,357.188-191.291,357.188-357.188l-0.421-16.253C573.872,163.526,595.211,141.422,612,116.258z" />
	</g>
</g>
</svg>
</a></li>
          <li><a href="https://www.linkedin.com/company/pingcap/" class="linkedin" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="18" height="18" viewBox="0 0 438.536 438.535" xml:space="preserve">
<g>
	<g>
		<rect x="5.424" y="145.895" width="94.216" height="282.932"/>
		<path d="M408.842,171.739c-19.791-21.604-45.967-32.408-78.512-32.408c-11.991,0-22.891,1.475-32.695,4.427
			c-9.801,2.95-18.079,7.089-24.838,12.419c-6.755,5.33-12.135,10.278-16.129,14.844c-3.798,4.337-7.512,9.389-11.136,15.104
			v-40.232h-93.935l0.288,13.706c0.193,9.139,0.288,37.307,0.288,84.508c0,47.205-0.19,108.777-0.572,184.722h93.931V270.942
			c0-9.705,1.041-17.412,3.139-23.127c4-9.712,10.037-17.843,18.131-24.407c8.093-6.572,18.13-9.855,30.125-9.855
			c16.364,0,28.407,5.662,36.117,16.987c7.707,11.324,11.561,26.98,11.561,46.966V428.82h93.931V266.664
			C438.529,224.976,428.639,193.336,408.842,171.739z"/>
		<path d="M53.103,9.708c-15.796,0-28.595,4.619-38.4,13.848C4.899,32.787,0,44.441,0,58.529c0,13.891,4.758,25.505,14.275,34.829
			c9.514,9.325,22.078,13.99,37.685,13.99h0.571c15.99,0,28.887-4.661,38.688-13.99c9.801-9.324,14.606-20.934,14.417-34.829
			c-0.19-14.087-5.047-25.742-14.561-34.973C81.562,14.323,68.9,9.708,53.103,9.708z"/>
	</g>
</g>
</svg>
</a></li>
          <li><a href="https://www.reddit.com/r/TiDB/" class="reddit" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 279.748 279.748" xml:space="preserve" width="18" height="18">
<path d="M279.748,133.142c0-19.299-15.701-35-35-35c-10.768,0-20.674,4.812-27.279,13.064
	c-18.532-8.431-39.663-13.626-62.015-15.271l19.206-60.692l42.895,9.294c3.285,12.782,14.901,22.258,28.693,22.258
	c16.336,0,29.627-13.29,29.627-29.626c0-16.336-13.291-29.627-29.627-29.627c-11.801,0-21.999,6.941-26.759,16.95l-49.497-10.725
	c-5.041-1.092-10.094,1.833-11.651,6.756l-23.705,74.907c-26.164,0.638-50.988,6.053-72.356,15.775
	C55.674,102.954,45.768,98.142,35,98.142c-19.299,0-35,15.701-35,35c0,9.373,3.683,18.173,10.222,24.709
	c-3.9,8.37-5.875,17.076-5.875,25.936c0,24.048,14.396,46.492,40.538,63.199c25.447,16.264,59.183,25.221,94.989,25.221
	c35.808,0,69.542-8.957,94.989-25.221c26.142-16.707,40.538-39.151,40.538-63.199c0-8.859-1.975-17.565-5.875-25.936
	C276.065,151.314,279.748,142.515,279.748,133.142z M15.369,145.139c-2.212-3.59-3.369-7.688-3.369-11.997c0-12.682,10.317-23,23-23
	c5.444,0,10.558,1.851,14.649,5.258C35.027,123.702,23.517,133.689,15.369,145.139z M68.04,165.405c0-13.785,11.215-25,25-25
	c13.785,0,25,11.215,25,25c0,13.785-11.215,25-25,25C79.255,190.405,68.04,179.19,68.04,165.405z M191.159,222.459
	c-9.745,10.637-29.396,17.244-51.285,17.244c-21.888,0-41.539-6.607-51.284-17.244c-1.805-1.97-2.733-4.525-2.617-7.192
	c0.116-2.669,1.266-5.133,3.235-6.937c1.849-1.694,4.247-2.627,6.754-2.627c2.797,0,5.484,1.183,7.373,3.244
	c5.803,6.333,20.827,10.756,36.539,10.756c15.712,0,30.737-4.423,36.539-10.756c1.889-2.062,4.576-3.244,7.374-3.244
	c2.508,0,4.906,0.933,6.755,2.627c1.97,1.804,3.118,4.268,3.234,6.937C193.893,217.934,192.964,220.489,191.159,222.459z
	 M186.708,190.405c-13.785,0-25-11.215-25-25c0-13.785,11.215-25,25-25c13.785,0,25,11.215,25,25
	C211.708,179.19,200.493,190.405,186.708,190.405z M264.379,145.139c-8.147-11.45-19.657-21.436-34.28-29.739
	c4.092-3.408,9.205-5.258,14.649-5.258c12.683,0,23,10.318,23,23C267.748,137.451,266.591,141.549,264.379,145.139z"/>
</svg>
</a></li>
          <li><a href="https://groups.google.com/forum/#!forum/tidb-user" class="google-plus" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 491.858 491.858" xml:space="preserve" width="18" height="18">
<g>
	<g>
		<g>
			<path d="M377.472,224.957H201.319v58.718H308.79c-16.032,51.048-63.714,88.077-120.055,88.077     c-69.492,0-125.823-56.335-125.823-125.824c0-69.492,56.333-125.823,125.823-125.823c34.994,0,66.645,14.289,89.452,37.346     l42.622-46.328c-34.04-33.355-80.65-53.929-132.074-53.929C84.5,57.193,0,141.693,0,245.928s84.5,188.737,188.736,188.737     c91.307,0,171.248-64.844,188.737-150.989v-58.718L377.472,224.957L377.472,224.957z" />
			<polygon points="491.858,224.857 455.827,224.857 455.827,188.826 424.941,188.826 424.941,224.857 388.91,224.857      388.91,255.74 424.941,255.74 424.941,291.772 455.827,291.772 455.827,255.74 491.858,255.74" />
		</g>
	</g>
</g>
</svg>
</a></li>
          <li><a href="https://stackoverflow.com/questions/tagged/tidb" class="stack-overflow" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="18" height="18" viewBox="0 0 547.597 547.597" xml:space="preserve">
<g>
	<g>
		<path d="M140.81,475.111h0.024l189.91-0.269c8.434-0.013,15.3-6.886,15.3-15.318v-21.298c0-8.428-6.854-15.288-15.3-15.288
			l-189.91,0.264c-8.433,0.012-15.3,6.885-15.3,15.318v21.31C125.535,468.257,132.389,475.111,140.81,475.111z"/>
		<path d="M58.667,517.854c0.073,29.26,0.073,29.449,3.072,29.449c0.018,0,0.037,0,0.055,0l10.612,0.294c0.031,0,0.055,0,0.086,0
			c0,0,85.814,0,171.629-0.036c42.914-0.019,85.821-0.05,118-0.092c16.09-0.019,29.505-0.043,38.887-0.074
			c17.803-0.055,17.803-0.055,17.803-3.072l0.3-10.697V333.299c0-8.434-6.866-15.3-15.3-15.3h-11.909c-8.434,0-15.3,6.866-15.3,15.3
			V496.22c0,5.062-4.119,9.18-9.181,9.18H110.51c-5.061,0-9.18-4.118-9.18-9.18V333.299c0-8.434-6.867-15.3-15.3-15.3H73.82
			c-8.433,0-15.3,6.86-15.3,15.3c0,23.342,0.012,76.084,0.055,122.981C58.594,479.727,58.625,501.722,58.667,517.854z"/>
		<path d="M142.322,397.399l189.402,17.467c0.478,0.043,0.948,0.062,1.413,0.062c7.956,0,14.468-5.985,15.159-13.917l1.83-21.096
			c0.729-8.396-5.508-15.851-13.898-16.628l-189.102-17.461c-8.593-0.795-15.869,5.441-16.653,13.825l-1.97,21.108
			c-0.38,4.069,0.844,8.042,3.452,11.181C134.567,395.087,138.252,397.026,142.322,397.399z"/>
		<path d="M437.636,208.849c1.273,7.344,7.607,12.675,15.05,12.675c0.875,0,1.756-0.074,2.644-0.232l21.065-3.678
			c8.311-1.451,13.898-9.395,12.454-17.706L456.345,12.678c-1.42-8.207-9.21-13.917-17.692-12.448l-21.065,3.678
			c-8.311,1.451-13.898,9.395-12.454,17.705L437.636,208.849z"/>
		<path d="M190.333,194.375l163.6,96.708c2.356,1.396,5.049,2.136,7.778,2.136c5.393,0,10.447-2.876,13.183-7.509l10.876-18.36
			c2.08-3.519,2.674-7.631,1.658-11.591c-1.016-3.954-3.513-7.283-7.032-9.358l-163.6-96.714
			c-7.014-4.149-16.836-1.597-20.967,5.374l-10.869,18.36c-2.081,3.519-2.674,7.638-1.658,11.591
			C184.317,188.971,186.82,192.294,190.333,194.375z"/>
		<path d="M387.525,240.501c2.853,4.174,7.57,6.659,12.626,6.659c3.091,0,6.077-0.924,8.635-2.681l17.405-11.934
			c6.953-4.768,8.752-14.314,4.015-21.292L323.29,54.104c-4.584-6.732-14.498-8.623-21.236-3.984L284.317,62.33
			c-6.945,4.779-8.727,14.327-3.971,21.291L387.525,240.501z"/>
		<path d="M154.482,302.319l183.465,49.156c1.298,0.349,2.632,0.526,3.966,0.526c6.903,0,12.98-4.67,14.762-11.347l5.508-20.624
			c2.179-8.152-2.681-16.555-10.826-18.74l-183.465-49.162c-8.017-2.148-16.604,2.852-18.728,10.826l-5.508,20.63
			C141.477,291.726,146.336,300.135,154.482,302.319z"/>
	</g>
</g>
</svg>
</a></li>
          <li id="wechat-mobile"><a class="wechat" href="javascript:void(0)"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="18" height="18" viewBox="0 0 31.403 31.404" xml:space="preserve">
<g>
	<g>
		<path d="M31.403,21.306c0-4.597-4.388-8.32-9.8-8.32c-5.414,0-9.802,3.725-9.802,8.32c0,4.597,4.388,8.322,9.802,8.322    c1.701,0,3.302-0.369,4.697-1.019l3.863,1.671l-0.447-4.309C30.782,24.642,31.403,23.034,31.403,21.306z M18.301,19.052    c-0.771,0-1.395-0.625-1.395-1.395s0.623-1.395,1.395-1.395c0.77,0,1.393,0.625,1.393,1.395S19.069,19.052,18.301,19.052z     M24.905,19.052c-0.769,0-1.394-0.625-1.394-1.395s0.625-1.395,1.394-1.395c0.771,0,1.396,0.625,1.396,1.395    S25.676,19.052,24.905,19.052z" />
		<path d="M21.604,11.885c1.515,0,2.957,0.27,4.271,0.755c0.009-0.175,0.03-0.345,0.03-0.521c0-6.074-5.801-10.996-12.953-10.996    C5.799,1.123,0,6.044,0,12.119c0,2.284,0.822,4.408,2.229,6.167L1.638,23.98l5.104-2.213c1.264,0.59,2.661,0.986,4.136,1.189    c-0.111-0.538-0.179-1.087-0.179-1.65C10.7,16.111,15.591,11.885,21.604,11.885z M17.317,5.457c1.017,0,1.84,0.824,1.84,1.84    c0,1.018-0.823,1.842-1.84,1.842c-1.019,0-1.841-0.824-1.841-1.842C15.476,6.281,16.301,5.457,17.317,5.457z M8.586,9.139    c-1.017,0-1.84-0.824-1.84-1.842c0-1.016,0.823-1.84,1.84-1.84c1.018,0,1.841,0.824,1.841,1.84    C10.427,8.313,9.603,9.139,8.586,9.139z" />
	</g>
</g>
</svg>
</a><div class="qr_code_outer f-hide">
    <div class="qr_code_inner">
        <div class="qr_code">
            <img id="js_qr_code_img" class="qr_code_img" src="https://download.pingcap.com/images/qrcode-min.jpg">
            <p>微信扫一扫<br> 微信ID：pingcap2015</p>
        </div>
    </div>
</div>
</li>
        </ul>
      </div>
      <div class="subscribe">
<style type="text/css" media="screen">
    #mc_embed_signup .response {
        margin-top: 12px;
        line-height: 1.4;
        font-size: 0.65rem;
    }
</style>
<div id="mc_embed_signup">
    <form action="//pingcap.us16.list-manage.com/subscribe/post?u=ab57beb8a88391cf6193c1b48&amp;id=7c67af4f9d" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
        <div id="mc_embed_signup_scroll">
            <div class="form-inline">
                <input type="email" value="" name="EMAIL" id="mce-EMAIL" class="form-control" placeholder="Subscribe to our newsletter">
                <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn btn-subscribe">
            </div>
            <div id="mce-responses" class="clear">
                <div class="response" id="mce-error-response" style="display:none"></div>
                <div class="response" id="mce-success-response" style="display:none"></div>
            </div>
            
            <div style="position: absolute; left: -5000px;" aria-hidden="true">
                <input type="text" name="b_ab57beb8a88391cf6193c1b48_7c67af4f9d" tabindex="-1" value="">
            </div>
        </div>
    </form>
</div>

<script type="text/javascript" src="https://download.pingcap.com/js/mc-validate.js"></script>
<script type='text/javascript'>
;(function($) {
  window.fnames = new Array()
  window.ftypes = new Array()
  fnames[0] = 'EMAIL'
  ftypes[0] = 'email'
  fnames[1] = 'FNAME'
  ftypes[1] = 'text'
  fnames[2] = 'LNAME'
  ftypes[2] = 'text'
})(jQuery)
var $mcj = jQuery.noConflict(true)
</script>

</div>
    </div>
    <div class="container">
      <a href="/docs/FAQ" class="btn-lang" id="lang">English</a>
    </div>
  </div>
</nav>

  
<div class="doc">
  <div class="container loading-container">
  <div class="sidebar">
    <div class="sticky-sidebar">
      <style type="text/css">
 

.content-item {
  background-color: #fff;
  border-radius: 3px;
  padding-bottom: 20px;
   
  max-width: 600px;
  min-height: 140px;
 }

@keyframes placeHolderShimmer {
  0%{ background-position: -468px 0; }
  100%{ background-position: 468px 0; }
}

.animated-background {
  animation-duration: 1.5s;
  animation-fill-mode: forwards;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
  animation-name: placeHolderShimmer;
  background: #f6f7f8;
  background: linear-gradient(to right, #eeeeee 8%, #dddddd 18%, #eeeeee 33%);
  background-size: 800px 104px;
  height: 96px;
  position: relative;
}

.background-masker {
  background: #fff;
  position: absolute;
}

 

.background-masker.header-top,
.background-masker.header-bottom,
.background-masker.subheader-bottom {
    top: 0;
    left: 0;
    right: 0;
    height: 10px;
}

.background-masker.header-left,
.background-masker.subheader-left,
.background-masker.header-right,
.background-masker.subheader-right {
    top: 10px;
    left: 0;
    height: 8px;
}

.background-masker.header-bottom {
    top: 18px;
    height: 6px;
}

.background-masker.subheader-left,
.background-masker.subheader-right {
    top: 24px;
    height: 6px;
}


.background-masker.header-right,
.background-masker.subheader-right {
    width: auto;
    left: 75%;
    right: 0;
}

.background-masker.subheader-right {
    left: 60%;
}

.background-masker.subheader-bottom {
    top: 22px;
    height: 10px;
}

.background-masker.content-top,
.background-masker.content-second-line,
.background-masker.content-third-line,
.background-masker.content-second-end,
.background-masker.content-third-end,
.background-masker.content-first-end {
    top: 40px;
    left: 0;
    right: 0;
    height: 6px;
}

.background-masker.content-top {
    height:20px;
}

.background-masker.content-first-end,
.background-masker.content-second-end,
.background-masker.content-third-end {
    width: auto;
    left: 80%;
    right: 0;
    top: 60px;
    height: 8px;
}

.background-masker.content-second-line {
    top: 68px;
}

.background-masker.content-second-end {
    left: 60%;
    top: 74px;
}

.background-masker.content-third-line {
    top: 82px;
}

.background-masker.content-third-end {
    left: 88%;
    top: 88px;
}
</style>

<div class="content-item">
  <div class="animated-background">
    <div class="background-masker header-top"></div>
    <div class="background-masker header-left"></div>
    <div class="background-masker header-right"></div>
    <div class="background-masker header-bottom"></div>
    <div class="background-masker subheader-left"></div>
    <div class="background-masker subheader-right"></div>
    <div class="background-masker subheader-bottom"></div>
    <div class="background-masker content-top"></div>
    <div class="background-masker content-first-end"></div>
    <div class="background-masker content-second-line"></div>
    <div class="background-masker content-second-end"></div>
    <div class="background-masker content-third-line"></div>
    <div class="background-masker content-third-end"></div>
  </div>
</div>

      <style type="text/css">
 

.content-item {
  background-color: #fff;
  border-radius: 3px;
  padding-bottom: 20px;
   
  max-width: 600px;
  min-height: 140px;
 }

@keyframes placeHolderShimmer {
  0%{ background-position: -468px 0; }
  100%{ background-position: 468px 0; }
}

.animated-background {
  animation-duration: 1.5s;
  animation-fill-mode: forwards;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
  animation-name: placeHolderShimmer;
  background: #f6f7f8;
  background: linear-gradient(to right, #eeeeee 8%, #dddddd 18%, #eeeeee 33%);
  background-size: 800px 104px;
  height: 96px;
  position: relative;
}

.background-masker {
  background: #fff;
  position: absolute;
}

 

.background-masker.header-top,
.background-masker.header-bottom,
.background-masker.subheader-bottom {
    top: 0;
    left: 0;
    right: 0;
    height: 10px;
}

.background-masker.header-left,
.background-masker.subheader-left,
.background-masker.header-right,
.background-masker.subheader-right {
    top: 10px;
    left: 0;
    height: 8px;
}

.background-masker.header-bottom {
    top: 18px;
    height: 6px;
}

.background-masker.subheader-left,
.background-masker.subheader-right {
    top: 24px;
    height: 6px;
}


.background-masker.header-right,
.background-masker.subheader-right {
    width: auto;
    left: 75%;
    right: 0;
}

.background-masker.subheader-right {
    left: 60%;
}

.background-masker.subheader-bottom {
    top: 22px;
    height: 10px;
}

.background-masker.content-top,
.background-masker.content-second-line,
.background-masker.content-third-line,
.background-masker.content-second-end,
.background-masker.content-third-end,
.background-masker.content-first-end {
    top: 40px;
    left: 0;
    right: 0;
    height: 6px;
}

.background-masker.content-top {
    height:20px;
}

.background-masker.content-first-end,
.background-masker.content-second-end,
.background-masker.content-third-end {
    width: auto;
    left: 80%;
    right: 0;
    top: 60px;
    height: 8px;
}

.background-masker.content-second-line {
    top: 68px;
}

.background-masker.content-second-end {
    left: 60%;
    top: 74px;
}

.background-masker.content-third-line {
    top: 82px;
}

.background-masker.content-third-end {
    left: 88%;
    top: 88px;
}
</style>

<div class="content-item">
  <div class="animated-background">
    <div class="background-masker header-top"></div>
    <div class="background-masker header-left"></div>
    <div class="background-masker header-right"></div>
    <div class="background-masker header-bottom"></div>
    <div class="background-masker subheader-left"></div>
    <div class="background-masker subheader-right"></div>
    <div class="background-masker subheader-bottom"></div>
    <div class="background-masker content-top"></div>
    <div class="background-masker content-first-end"></div>
    <div class="background-masker content-second-line"></div>
    <div class="background-masker content-second-end"></div>
    <div class="background-masker content-third-line"></div>
    <div class="background-masker content-third-end"></div>
  </div>
</div>

      <style type="text/css">
 

.content-item {
  background-color: #fff;
  border-radius: 3px;
  padding-bottom: 20px;
   
  max-width: 600px;
  min-height: 140px;
 }

@keyframes placeHolderShimmer {
  0%{ background-position: -468px 0; }
  100%{ background-position: 468px 0; }
}

.animated-background {
  animation-duration: 1.5s;
  animation-fill-mode: forwards;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
  animation-name: placeHolderShimmer;
  background: #f6f7f8;
  background: linear-gradient(to right, #eeeeee 8%, #dddddd 18%, #eeeeee 33%);
  background-size: 800px 104px;
  height: 96px;
  position: relative;
}

.background-masker {
  background: #fff;
  position: absolute;
}

 

.background-masker.header-top,
.background-masker.header-bottom,
.background-masker.subheader-bottom {
    top: 0;
    left: 0;
    right: 0;
    height: 10px;
}

.background-masker.header-left,
.background-masker.subheader-left,
.background-masker.header-right,
.background-masker.subheader-right {
    top: 10px;
    left: 0;
    height: 8px;
}

.background-masker.header-bottom {
    top: 18px;
    height: 6px;
}

.background-masker.subheader-left,
.background-masker.subheader-right {
    top: 24px;
    height: 6px;
}


.background-masker.header-right,
.background-masker.subheader-right {
    width: auto;
    left: 75%;
    right: 0;
}

.background-masker.subheader-right {
    left: 60%;
}

.background-masker.subheader-bottom {
    top: 22px;
    height: 10px;
}

.background-masker.content-top,
.background-masker.content-second-line,
.background-masker.content-third-line,
.background-masker.content-second-end,
.background-masker.content-third-end,
.background-masker.content-first-end {
    top: 40px;
    left: 0;
    right: 0;
    height: 6px;
}

.background-masker.content-top {
    height:20px;
}

.background-masker.content-first-end,
.background-masker.content-second-end,
.background-masker.content-third-end {
    width: auto;
    left: 80%;
    right: 0;
    top: 60px;
    height: 8px;
}

.background-masker.content-second-line {
    top: 68px;
}

.background-masker.content-second-end {
    left: 60%;
    top: 74px;
}

.background-masker.content-third-line {
    top: 82px;
}

.background-masker.content-third-end {
    left: 88%;
    top: 88px;
}
</style>

<div class="content-item">
  <div class="animated-background">
    <div class="background-masker header-top"></div>
    <div class="background-masker header-left"></div>
    <div class="background-masker header-right"></div>
    <div class="background-masker header-bottom"></div>
    <div class="background-masker subheader-left"></div>
    <div class="background-masker subheader-right"></div>
    <div class="background-masker subheader-bottom"></div>
    <div class="background-masker content-top"></div>
    <div class="background-masker content-first-end"></div>
    <div class="background-masker content-second-line"></div>
    <div class="background-masker content-second-end"></div>
    <div class="background-masker content-third-line"></div>
    <div class="background-masker content-third-end"></div>
  </div>
</div>

    </div>
  </div>

  <div class="archive">
    <style type="text/css">
 

.content-item {
  background-color: #fff;
  border-radius: 3px;
  padding-bottom: 20px;
   
  max-width: 600px;
  min-height: 140px;
 }

@keyframes placeHolderShimmer {
  0%{ background-position: -468px 0; }
  100%{ background-position: 468px 0; }
}

.animated-background {
  animation-duration: 1.5s;
  animation-fill-mode: forwards;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
  animation-name: placeHolderShimmer;
  background: #f6f7f8;
  background: linear-gradient(to right, #eeeeee 8%, #dddddd 18%, #eeeeee 33%);
  background-size: 800px 104px;
  height: 96px;
  position: relative;
}

.background-masker {
  background: #fff;
  position: absolute;
}

 

.background-masker.header-top,
.background-masker.header-bottom,
.background-masker.subheader-bottom {
    top: 0;
    left: 0;
    right: 0;
    height: 10px;
}

.background-masker.header-left,
.background-masker.subheader-left,
.background-masker.header-right,
.background-masker.subheader-right {
    top: 10px;
    left: 0;
    height: 8px;
}

.background-masker.header-bottom {
    top: 18px;
    height: 6px;
}

.background-masker.subheader-left,
.background-masker.subheader-right {
    top: 24px;
    height: 6px;
}


.background-masker.header-right,
.background-masker.subheader-right {
    width: auto;
    left: 75%;
    right: 0;
}

.background-masker.subheader-right {
    left: 60%;
}

.background-masker.subheader-bottom {
    top: 22px;
    height: 10px;
}

.background-masker.content-top,
.background-masker.content-second-line,
.background-masker.content-third-line,
.background-masker.content-second-end,
.background-masker.content-third-end,
.background-masker.content-first-end {
    top: 40px;
    left: 0;
    right: 0;
    height: 6px;
}

.background-masker.content-top {
    height:20px;
}

.background-masker.content-first-end,
.background-masker.content-second-end,
.background-masker.content-third-end {
    width: auto;
    left: 80%;
    right: 0;
    top: 60px;
    height: 8px;
}

.background-masker.content-second-line {
    top: 68px;
}

.background-masker.content-second-end {
    left: 60%;
    top: 74px;
}

.background-masker.content-third-line {
    top: 82px;
}

.background-masker.content-third-end {
    left: 88%;
    top: 88px;
}
</style>

<div class="content-item">
  <div class="animated-background">
    <div class="background-masker header-top"></div>
    <div class="background-masker header-left"></div>
    <div class="background-masker header-right"></div>
    <div class="background-masker header-bottom"></div>
    <div class="background-masker subheader-left"></div>
    <div class="background-masker subheader-right"></div>
    <div class="background-masker subheader-bottom"></div>
    <div class="background-masker content-top"></div>
    <div class="background-masker content-first-end"></div>
    <div class="background-masker content-second-line"></div>
    <div class="background-masker content-second-end"></div>
    <div class="background-masker content-third-line"></div>
    <div class="background-masker content-third-end"></div>
  </div>
</div>

    <style type="text/css">
 

.content-item {
  background-color: #fff;
  border-radius: 3px;
  padding-bottom: 20px;
   
  max-width: 600px;
  min-height: 140px;
 }

@keyframes placeHolderShimmer {
  0%{ background-position: -468px 0; }
  100%{ background-position: 468px 0; }
}

.animated-background {
  animation-duration: 1.5s;
  animation-fill-mode: forwards;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
  animation-name: placeHolderShimmer;
  background: #f6f7f8;
  background: linear-gradient(to right, #eeeeee 8%, #dddddd 18%, #eeeeee 33%);
  background-size: 800px 104px;
  height: 96px;
  position: relative;
}

.background-masker {
  background: #fff;
  position: absolute;
}

 

.background-masker.header-top,
.background-masker.header-bottom,
.background-masker.subheader-bottom {
    top: 0;
    left: 0;
    right: 0;
    height: 10px;
}

.background-masker.header-left,
.background-masker.subheader-left,
.background-masker.header-right,
.background-masker.subheader-right {
    top: 10px;
    left: 0;
    height: 8px;
}

.background-masker.header-bottom {
    top: 18px;
    height: 6px;
}

.background-masker.subheader-left,
.background-masker.subheader-right {
    top: 24px;
    height: 6px;
}


.background-masker.header-right,
.background-masker.subheader-right {
    width: auto;
    left: 75%;
    right: 0;
}

.background-masker.subheader-right {
    left: 60%;
}

.background-masker.subheader-bottom {
    top: 22px;
    height: 10px;
}

.background-masker.content-top,
.background-masker.content-second-line,
.background-masker.content-third-line,
.background-masker.content-second-end,
.background-masker.content-third-end,
.background-masker.content-first-end {
    top: 40px;
    left: 0;
    right: 0;
    height: 6px;
}

.background-masker.content-top {
    height:20px;
}

.background-masker.content-first-end,
.background-masker.content-second-end,
.background-masker.content-third-end {
    width: auto;
    left: 80%;
    right: 0;
    top: 60px;
    height: 8px;
}

.background-masker.content-second-line {
    top: 68px;
}

.background-masker.content-second-end {
    left: 60%;
    top: 74px;
}

.background-masker.content-third-line {
    top: 82px;
}

.background-masker.content-third-end {
    left: 88%;
    top: 88px;
}
</style>

<div class="content-item">
  <div class="animated-background">
    <div class="background-masker header-top"></div>
    <div class="background-masker header-left"></div>
    <div class="background-masker header-right"></div>
    <div class="background-masker header-bottom"></div>
    <div class="background-masker subheader-left"></div>
    <div class="background-masker subheader-right"></div>
    <div class="background-masker subheader-bottom"></div>
    <div class="background-masker content-top"></div>
    <div class="background-masker content-first-end"></div>
    <div class="background-masker content-second-line"></div>
    <div class="background-masker content-second-end"></div>
    <div class="background-masker content-third-line"></div>
    <div class="background-masker content-third-end"></div>
  </div>
</div>

    <style type="text/css">
 

.content-item {
  background-color: #fff;
  border-radius: 3px;
  padding-bottom: 20px;
   
  max-width: 600px;
  min-height: 140px;
 }

@keyframes placeHolderShimmer {
  0%{ background-position: -468px 0; }
  100%{ background-position: 468px 0; }
}

.animated-background {
  animation-duration: 1.5s;
  animation-fill-mode: forwards;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
  animation-name: placeHolderShimmer;
  background: #f6f7f8;
  background: linear-gradient(to right, #eeeeee 8%, #dddddd 18%, #eeeeee 33%);
  background-size: 800px 104px;
  height: 96px;
  position: relative;
}

.background-masker {
  background: #fff;
  position: absolute;
}

 

.background-masker.header-top,
.background-masker.header-bottom,
.background-masker.subheader-bottom {
    top: 0;
    left: 0;
    right: 0;
    height: 10px;
}

.background-masker.header-left,
.background-masker.subheader-left,
.background-masker.header-right,
.background-masker.subheader-right {
    top: 10px;
    left: 0;
    height: 8px;
}

.background-masker.header-bottom {
    top: 18px;
    height: 6px;
}

.background-masker.subheader-left,
.background-masker.subheader-right {
    top: 24px;
    height: 6px;
}


.background-masker.header-right,
.background-masker.subheader-right {
    width: auto;
    left: 75%;
    right: 0;
}

.background-masker.subheader-right {
    left: 60%;
}

.background-masker.subheader-bottom {
    top: 22px;
    height: 10px;
}

.background-masker.content-top,
.background-masker.content-second-line,
.background-masker.content-third-line,
.background-masker.content-second-end,
.background-masker.content-third-end,
.background-masker.content-first-end {
    top: 40px;
    left: 0;
    right: 0;
    height: 6px;
}

.background-masker.content-top {
    height:20px;
}

.background-masker.content-first-end,
.background-masker.content-second-end,
.background-masker.content-third-end {
    width: auto;
    left: 80%;
    right: 0;
    top: 60px;
    height: 8px;
}

.background-masker.content-second-line {
    top: 68px;
}

.background-masker.content-second-end {
    left: 60%;
    top: 74px;
}

.background-masker.content-third-line {
    top: 82px;
}

.background-masker.content-third-end {
    left: 88%;
    top: 88px;
}
</style>

<div class="content-item">
  <div class="animated-background">
    <div class="background-masker header-top"></div>
    <div class="background-masker header-left"></div>
    <div class="background-masker header-right"></div>
    <div class="background-masker header-bottom"></div>
    <div class="background-masker subheader-left"></div>
    <div class="background-masker subheader-right"></div>
    <div class="background-masker subheader-bottom"></div>
    <div class="background-masker content-top"></div>
    <div class="background-masker content-first-end"></div>
    <div class="background-masker content-second-line"></div>
    <div class="background-masker content-second-end"></div>
    <div class="background-masker content-third-line"></div>
    <div class="background-masker content-third-end"></div>
  </div>
</div>

    <style type="text/css">
 

.content-item {
  background-color: #fff;
  border-radius: 3px;
  padding-bottom: 20px;
   
  max-width: 600px;
  min-height: 140px;
 }

@keyframes placeHolderShimmer {
  0%{ background-position: -468px 0; }
  100%{ background-position: 468px 0; }
}

.animated-background {
  animation-duration: 1.5s;
  animation-fill-mode: forwards;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
  animation-name: placeHolderShimmer;
  background: #f6f7f8;
  background: linear-gradient(to right, #eeeeee 8%, #dddddd 18%, #eeeeee 33%);
  background-size: 800px 104px;
  height: 96px;
  position: relative;
}

.background-masker {
  background: #fff;
  position: absolute;
}

 

.background-masker.header-top,
.background-masker.header-bottom,
.background-masker.subheader-bottom {
    top: 0;
    left: 0;
    right: 0;
    height: 10px;
}

.background-masker.header-left,
.background-masker.subheader-left,
.background-masker.header-right,
.background-masker.subheader-right {
    top: 10px;
    left: 0;
    height: 8px;
}

.background-masker.header-bottom {
    top: 18px;
    height: 6px;
}

.background-masker.subheader-left,
.background-masker.subheader-right {
    top: 24px;
    height: 6px;
}


.background-masker.header-right,
.background-masker.subheader-right {
    width: auto;
    left: 75%;
    right: 0;
}

.background-masker.subheader-right {
    left: 60%;
}

.background-masker.subheader-bottom {
    top: 22px;
    height: 10px;
}

.background-masker.content-top,
.background-masker.content-second-line,
.background-masker.content-third-line,
.background-masker.content-second-end,
.background-masker.content-third-end,
.background-masker.content-first-end {
    top: 40px;
    left: 0;
    right: 0;
    height: 6px;
}

.background-masker.content-top {
    height:20px;
}

.background-masker.content-first-end,
.background-masker.content-second-end,
.background-masker.content-third-end {
    width: auto;
    left: 80%;
    right: 0;
    top: 60px;
    height: 8px;
}

.background-masker.content-second-line {
    top: 68px;
}

.background-masker.content-second-end {
    left: 60%;
    top: 74px;
}

.background-masker.content-third-line {
    top: 82px;
}

.background-masker.content-third-end {
    left: 88%;
    top: 88px;
}
</style>

<div class="content-item">
  <div class="animated-background">
    <div class="background-masker header-top"></div>
    <div class="background-masker header-left"></div>
    <div class="background-masker header-right"></div>
    <div class="background-masker header-bottom"></div>
    <div class="background-masker subheader-left"></div>
    <div class="background-masker subheader-right"></div>
    <div class="background-masker subheader-bottom"></div>
    <div class="background-masker content-top"></div>
    <div class="background-masker content-first-end"></div>
    <div class="background-masker content-second-line"></div>
    <div class="background-masker content-second-end"></div>
    <div class="background-masker content-third-line"></div>
    <div class="background-masker content-third-end"></div>
  </div>
</div>

  </div>

  <div class="sidebar">
    <div class="sticky-sidebar">
      <style type="text/css">
 

.content-item {
  background-color: #fff;
  border-radius: 3px;
  padding-bottom: 20px;
   
  max-width: 600px;
  min-height: 140px;
 }

@keyframes placeHolderShimmer {
  0%{ background-position: -468px 0; }
  100%{ background-position: 468px 0; }
}

.animated-background {
  animation-duration: 1.5s;
  animation-fill-mode: forwards;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
  animation-name: placeHolderShimmer;
  background: #f6f7f8;
  background: linear-gradient(to right, #eeeeee 8%, #dddddd 18%, #eeeeee 33%);
  background-size: 800px 104px;
  height: 96px;
  position: relative;
}

.background-masker {
  background: #fff;
  position: absolute;
}

 

.background-masker.header-top,
.background-masker.header-bottom,
.background-masker.subheader-bottom {
    top: 0;
    left: 0;
    right: 0;
    height: 10px;
}

.background-masker.header-left,
.background-masker.subheader-left,
.background-masker.header-right,
.background-masker.subheader-right {
    top: 10px;
    left: 0;
    height: 8px;
}

.background-masker.header-bottom {
    top: 18px;
    height: 6px;
}

.background-masker.subheader-left,
.background-masker.subheader-right {
    top: 24px;
    height: 6px;
}


.background-masker.header-right,
.background-masker.subheader-right {
    width: auto;
    left: 75%;
    right: 0;
}

.background-masker.subheader-right {
    left: 60%;
}

.background-masker.subheader-bottom {
    top: 22px;
    height: 10px;
}

.background-masker.content-top,
.background-masker.content-second-line,
.background-masker.content-third-line,
.background-masker.content-second-end,
.background-masker.content-third-end,
.background-masker.content-first-end {
    top: 40px;
    left: 0;
    right: 0;
    height: 6px;
}

.background-masker.content-top {
    height:20px;
}

.background-masker.content-first-end,
.background-masker.content-second-end,
.background-masker.content-third-end {
    width: auto;
    left: 80%;
    right: 0;
    top: 60px;
    height: 8px;
}

.background-masker.content-second-line {
    top: 68px;
}

.background-masker.content-second-end {
    left: 60%;
    top: 74px;
}

.background-masker.content-third-line {
    top: 82px;
}

.background-masker.content-third-end {
    left: 88%;
    top: 88px;
}
</style>

<div class="content-item">
  <div class="animated-background">
    <div class="background-masker header-top"></div>
    <div class="background-masker header-left"></div>
    <div class="background-masker header-right"></div>
    <div class="background-masker header-bottom"></div>
    <div class="background-masker subheader-left"></div>
    <div class="background-masker subheader-right"></div>
    <div class="background-masker subheader-bottom"></div>
    <div class="background-masker content-top"></div>
    <div class="background-masker content-first-end"></div>
    <div class="background-masker content-second-line"></div>
    <div class="background-masker content-second-end"></div>
    <div class="background-masker content-third-line"></div>
    <div class="background-masker content-third-end"></div>
  </div>
</div>

    </div>
  </div>
</div>

  <div class="container content-container" style="display: none;">
    <div class="sidebar">
      <div class="sticky-sidebar">
        <h2 class="title"> 文档 </h2>
        <div class="st_tree nav-toc" style="display: none;">
          <ul>
  
    
      <li class="has-child"><a href="#">TiDB 简介与整体架构<i class="icon"></i></a>
        <ul>
  
    
    <li class="leaf-child">
      <a href="/docs-cn/overview/#tidb-%e7%ae%80%e4%bb%8b">TiDB 简介</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/overview/#tidb-%e6%95%b4%e4%bd%93%e6%9e%b6%e6%9e%84">TiDB 整体架构</a>
    </li>
    
  
</ul>

      </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/QUICKSTART/">TiDB 快速入门指南</a>
    </li>
    
  
    
      <li class="has-child"><a href="#">TiDB 用户文档<i class="icon"></i></a>
        <ul>
  
    
      <li class="has-child"><a href="#">TiDB 数据库管理<i class="icon"></i></a>
        <ul>
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/tidb-server/">TiDB 服务</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/server-command-option/">TiDB 进程启动参数</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/tidb-server/#tidb-%e6%95%b0%e6%8d%ae%e7%9b%ae%e5%bd%95">TiDB 数据目录</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/system-database/">TiDB 系统数据库</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/variable/">TiDB 系统变量</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/tidb-specific/">TiDB 专用系统变量和语法</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/tidb-server/#tidb-%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%97%a5%e5%bf%97%e6%96%87%e4%bb%b6">TiDB 服务器日志文件</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/privilege/">TiDB 访问权限管理</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/user-account-management/">TiDB 用户账户管理</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/encrypted-connections/">使用加密连接</a>
    </li>
    
  
</ul>

      </li>
    
  
    
      <li class="has-child"><a href="#">SQL 优化<i class="icon"></i></a>
        <ul>
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/understanding-the-query-execution-plan/">理解 TiDB 执行计划</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/statistics/">统计信息</a>
    </li>
    
  
</ul>

      </li>
    
  
    
      <li class="has-child"><a href="#">语言结构<i class="icon"></i></a>
        <ul>
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/literal-values/">字面值</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/schema-object-names/">数据库、表、索引、列和别名</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/keywords-and-reserved-words/">关键字和保留字</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/user-defined-variables/">用户变量</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/expression-syntax/">表达式语法</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/comment-syntax/">注释语法</a>
    </li>
    
  
</ul>

      </li>
    
  
    
      <li class="has-child"><a href="#">字符集和时区<i class="icon"></i></a>
        <ul>
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/character-set-support/">字符集支持</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/character-set-configuration/">字符集配置</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/time-zone/">时区</a>
    </li>
    
  
</ul>

      </li>
    
  
    
      <li class="has-child"><a href="#">数据类型<i class="icon"></i></a>
        <ul>
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/datatype/#%e6%95%b0%e5%80%bc%e7%b1%bb%e5%9e%8b">数值类型</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/date-and-time-types/">日期和时间类型</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/datatype/#%e5%ad%97%e7%ac%a6%e4%b8%b2%e7%b1%bb%e5%9e%8b">字符串类型</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/datatype/#json-%e7%b1%bb%e5%9e%8b">JSON 数据类型</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/datatype/#%e6%9e%9a%e4%b8%be%e7%b1%bb%e5%9e%8b">枚举类型</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/datatype/#%e9%9b%86%e5%90%88%e7%b1%bb%e5%9e%8b">集合类型</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/datatype/#%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b%e7%9a%84%e9%bb%98%e8%ae%a4%e5%80%bc">数据类型默认值</a>
    </li>
    
  
</ul>

      </li>
    
  
    
      <li class="has-child"><a href="#">函数和操作符<i class="icon"></i></a>
        <ul>
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/functions-and-operators-reference/">函数和操作符概述</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/type-conversion-in-expression-evaluation/">表达式求值的类型转换</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/operators/">操作符</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/control-flow-functions/">控制流程函数</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/string-functions/">字符串函数</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/numeric-functions-and-operators/">数值函数与操作符</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/date-and-time-functions/">日期和时间函数</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/bit-functions-and-operators/">位函数和操作符</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/cast-functions-and-operators/">Cast 函数和操作符</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/encryption-and-compression-functions/">加密和压缩函数</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/information-functions/">信息函数</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/json-functions/">JSON 函数</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/aggregate-group-by-functions/">GROUP BY 聚合函数</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/miscellaneous-functions/">其他函数</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/precision-math/">精度数学</a>
    </li>
    
  
</ul>

      </li>
    
  
    
      <li class="has-child"><a href="#">SQL 语句语法<i class="icon"></i></a>
        <ul>
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/ddl/">数据定义语句 (DDL)</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/dml/">数据操作语句 (DML)</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/transaction/">事务语句</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/admin/">数据库管理语句</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/prepare/">Prepared SQL 语句语法</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/util/">实用工具语句</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="https://pingcap.github.io/sqlgram/">TiDB SQL 语法图</a>
    </li>
    
  
</ul>

      </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/json-functions-generated-column/">JSON 支持</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/connection-and-APIs/">Connectors 和 API</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/transaction-isolation/">TiDB 事务隔离级别</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/error/">错误码与故障诊断</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/sql/mysql-compatibility/">与 MySQL 兼容性对比</a>
    </li>
    
  
    
      <li class="has-child"><a href="#">高级功能<i class="icon"></i></a>
        <ul>
  
    
    <li class="leaf-child">
      <a href="/docs-cn/op-guide/history-read/">历史数据回溯</a>
    </li>
    
  
</ul>

      </li>
    
  
</ul>

      </li>
    
  
    
      <li class="has-child"><a href="#">TiDB 运维文档<i class="icon"></i></a>
        <ul>
  
    
    <li class="leaf-child">
      <a href="/docs-cn/op-guide/recommendation/">软硬件环境需求</a>
    </li>
    
  
    
      <li class="has-child"><a href="#">部署集群 <i class="icon"></i></a>
        <ul>
  
    
    <li class="leaf-child">
      <a href="/docs-cn/op-guide/ansible-deployment/">Ansible 部署方案（强烈推荐）</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/op-guide/offline-ansible-deployment/">离线 Ansible 部署方案</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/op-guide/docker-deployment/">Docker 部署方案</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/op-guide/docker-compose/">Docker Compose 部署方案</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/op-guide/location-awareness/">跨机房部署方案</a>
    </li>
    
  
</ul>

      </li>
    
  
    
      <li class="has-child"><a href="#">配置集群<i class="icon"></i></a>
        <ul>
  
    
    <li class="leaf-child">
      <a href="/docs-cn/op-guide/configuration/">参数解释</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/op-guide/security/">开启 TLS 验证</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/op-guide/generate-self-signed-certificates/">生成自签名证书</a>
    </li>
    
  
</ul>

      </li>
    
  
    
      <li class="has-child"><a href="#">监控集群<i class="icon"></i></a>
        <ul>
  
    
    <li class="leaf-child">
      <a href="/docs-cn/op-guide/monitor-overview/">整体监控框架概述</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/op-guide/dashboard-overview-info/">重要监控指标详解</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/op-guide/monitor/">组件状态 API &amp; 监控</a>
    </li>
    
  
</ul>

      </li>
    
  
    
      <li class="has-child"><a href="#">扩容缩容<i class="icon"></i></a>
        <ul>
  
    
    <li class="leaf-child">
      <a href="/docs-cn/QUICKSTART/#tidb-%e9%9b%86%e7%be%a4%e6%89%a9%e5%ae%b9%e7%bc%a9%e5%ae%b9%e6%96%b9%e6%a1%88">使用 Ansible 扩容缩容</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/op-guide/horizontal-scale/">集群扩容缩容方案</a>
    </li>
    
  
</ul>

      </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/op-guide/ansible-deployment/#%e6%bb%9a%e5%8a%a8%e5%8d%87%e7%ba%a7">升级</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/op-guide/tune-tikv/">性能调优</a>
    </li>
    
  
    
      <li class="has-child"><a href="#">备份与迁移<i class="icon"></i></a>
        <ul>
  
    
    <li class="leaf-child">
      <a href="/docs-cn/op-guide/backup-restore/">备份与恢复</a>
    </li>
    
  
    
      <li class="has-child"><a href="#">数据迁移<i class="icon"></i></a>
        <ul>
  
    
    <li class="leaf-child">
      <a href="/docs-cn/op-guide/migration-overview/">数据迁移概述</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/op-guide/migration/#%e4%bd%bf%e7%94%a8-mydumperloader-%e5%85%a8%e9%87%8f%e5%af%bc%e5%85%a5%e6%95%b0%e6%8d%ae">全量导入</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/op-guide/migration/#%e4%bd%bf%e7%94%a8-syncer-%e5%a2%9e%e9%87%8f%e5%af%bc%e5%85%a5%e6%95%b0%e6%8d%ae">增量导入</a>
    </li>
    
  
</ul>

      </li>
    
  
</ul>

      </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/op-guide/binary-deployment/">Binary 部署方案</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/trouble-shooting/">故障诊断</a>
    </li>
    
  
</ul>

      </li>
    
  
    
      <li class="has-child"><a href="#">TiDB 周边工具<i class="icon"></i></a>
        <ul>
  
    
    <li class="leaf-child">
      <a href="/docs-cn/tools/syncer/">Syncer 使用文档</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/tools/loader/">Loader 使用文档</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/tools/tidb-binlog-kafka/">TiDB-Binlog 使用文档</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/tools/pd-control/">PD Control 使用文档</a>
    </li>
    
  
</ul>

      </li>
    
  
    
      <li class="has-child"><a href="#">TiSpark 文档<i class="icon"></i></a>
        <ul>
  
    
    <li class="leaf-child">
      <a href="/docs-cn/tispark/tispark-quick-start-guide/">TiSpark 快速入门指南</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/tispark/tispark-user-guide/">TiSpark 用户指南</a>
    </li>
    
  
</ul>

      </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/FAQ/">常见问题与解答(FAQ)</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="https://pingcap.com/blog-cn/tidb-best-practice/">最佳实践</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="/docs-cn/releases/README/">版本发布历史</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="https://github.com/pingcap/docs-cn/blob/master/ROADMAP.md">TiDB 路线图</a>
    </li>
    
  
    
      <li class="has-child"><a href="#">用户案例<i class="icon"></i></a>
        <ul>
  
    
    <li class="leaf-child">
      <a href="http://t.cn/RT8FbP6">Mobike</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="http://t.cn/RTYVhzH">易果生鲜</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="http://t.cn/RT9r5di">一面数据</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="http://t.cn/RHRQfNT">凤凰网</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="http://t.cn/RTKnKSX">猿辅导</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="http://t.cn/R8bXM2f">二维火</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="http://t.cn/RTKnsL7">去哪儿</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="http://t.cn/RQVePoX">G7</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="http://t.cn/RT9r7hx">盖娅互娱</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="http://t.cn/R8k4AWB">游族网络</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="http://t.cn/RTKm6ds">万达网络</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="http://t.cn/RQeoKaa">佐助金融</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="http://t.cn/RTKnTev">360金融</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="http://t.cn/RTYWADg">某电信运营商</a>
    </li>
    
  
</ul>

      </li>
    
  
    
      <li class="has-child"><a href="#">更多资源<i class="icon"></i></a>
        <ul>
  
    
    <li class="leaf-child">
      <a href="https://github.com/pingcap/tidb-tools">常用工具</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="https://pingcap.com/blog-cn/">PingCAP 团队技术博客</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="https://zhuanlan.zhihu.com/newsql">知乎专栏</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="https://pingcap.com/weekly/">Weekly</a>
    </li>
    
  
    
    <li class="leaf-child">
      <a href="https://pingcap.com/docs">英文文档</a>
    </li>
    
  
</ul>

      </li>
    
  
</ul>

        </div>
      </div>
    </div>

    <div class="archive">
        <div class="content markdown-body">
          

<h1 id="一-tidb-介绍-架构-原理">一、 TiDB 介绍、架构、原理</h1>

<h2 id="1-1-tidb-介绍及整体架构">1.1 TiDB 介绍及整体架构</h2>

<h3 id="1-1-1-tidb-整体架构">1.1.1 TiDB 整体架构</h3>

<p><a href="https://pingcap.com/docs-cn/overview/">https://pingcap.com/docs-cn/overview/</a></p>

<h3 id="1-1-2-tidb-是什么">1.1.2 TiDB 是什么？</h3>

<p>TiDB 是一个分布式 NewSQL 数据库。它支持水平弹性扩展、ACID 事务、标准 SQL、MySQL 语法和 MySQL 协议，具有数据强一致的高可用特性，是一个不仅适合 OLTP 场景还适合 OLAP 场景的混合数据库。</p>

<h3 id="1-1-3-tidb-是基于-mysql-开发的吗">1.1.3 TiDB 是基于 MySQL 开发的吗？</h3>

<p>不是，虽然 TiDB 支持 MySQL 语法和协议，但是 TiDB 是由 PingCAP 团队完全自主开发的产品。</p>

<h3 id="1-1-4-tidb-tikv-placement-driver-pd-主要作用">1.1.4 TiDB、TiKV、Placement Driver (PD)  主要作用？</h3>

<ul>
<li>TiDB 是 Server 计算层，主要负责 SQL 的解析、制定查询计划、生成执行器。</li>
<li>TiKV 是分布式 Key-Value 存储引擎，用来存储真正的数据，简而言之，TiKV 是 TiDB 的存储引擎。</li>
<li>PD 是 TiDB 集群的管理组件，负责存储 TiKV 的元数据，同时也负责分配时间戳以及对 TiKV 做负载均衡调度。</li>
</ul>

<h3 id="1-1-5-tidb-易用性如何">1.1.5 TiDB 易用性如何？</h3>

<p>TiDB 使用起来很简单，可以将 TiDB 集群当成 MySQL 来用，你可以将 TiDB 用在任何以 MySQL 作为后台存储服务的应用中，并且基本上不需要修改应用代码，同时你可以用大部分流行的 MySQL 管理工具来管理 TiDB。</p>

<h3 id="1-1-6-tidb-和-mysql-兼容性如何">1.1.6 TiDB 和 MySQL 兼容性如何？</h3>

<p>TiDB 目前还不支持触发器、存储过程、自定义函数、外键，除此之外，TiDB 支持绝大部分 MySQL 5.7 的语法。</p>

<p>详情参见：<a href="sql/mysql-compatibility.md">与 MySQL 兼容性对比</a>。</p>

<h3 id="1-1-7-tidb-具备高可用的特性吗">1.1.7 TiDB 具备高可用的特性吗？</h3>

<p>TiDB 天然具备高可用特性，TiDB、TiKV、PD 这三个组件都能容忍部分实例失效，不影响整个集群的可用性。具体见 <a href="overview.md#高可用">TiDB 高可用性</a>。</p>

<h3 id="1-1-8-tidb-数据是强一致的吗">1.1.8 TiDB 数据是强一致的吗？</h3>

<p>TiDB 使用 Raft 在多个副本之间做数据同步，从而保证数据的强一致，单个副本失效时，不影响数据的可靠性。</p>

<h3 id="1-1-9-tidb-支持分布式事务吗">1.1.9 TiDB 支持分布式事务吗？</h3>

<p>TiDB 支持 ACID 分布式事务，事务模型是以 Google 的 Percolator 模型为基础，并做了一些优化。这个模型需要一个时间戳分配器，分配唯一且递增的时间戳。在 TiDB 集群中，PD 承担时间戳分配器的角色。</p>

<h3 id="1-1-10-tidb-支持哪些编程语言">1.1.10 TiDB 支持哪些编程语言？</h3>

<p>只要支持 MySQL Client/Driver 的编程语言，都可以直接使用 TiDB。</p>

<h3 id="1-1-11-tidb-是否支持其他存储引擎">1.1.11 TiDB 是否支持其他存储引擎？</h3>

<p>是的，除了 TiKV 之外，TiDB 还支持一些流行的单机存储引擎，比如 GolevelDB、RocksDB、BoltDB 等。如果一个存储引擎是支持事务的 KV 引擎，并且能提供一个满足 TiDB 接口要求的 Client，即可接入 TiDB。</p>

<h3 id="1-1-12-官方有没有三中心跨机房多活部署的推荐方案">1.1.12 官方有没有三中心跨机房多活部署的推荐方案？</h3>

<p>从 TiDB 架构来讲，支持真正意义上的跨中心异地多活，从操作层面讲，依赖数据中心之间的网络延迟和稳定性，一般建议延迟在 5ms 以下，目前我们已经有相似客户方案，具体请咨询官方: <a href="mailto:info@pingcap.com">info@pingcap.com</a>。</p>

<h3 id="1-1-13-除了官方文档-有没有其他-tidb-知识获取途径">1.1.13 除了官方文档，有没有其他 TiDB 知识获取途径？</h3>

<p>目前 <a href="https://pingcap.com/docs-cn/">官方文档</a>是获取 TiDB 相关知识最主要、最及时的发布途径。除此之外，我们也有一些技术沟通群，如有需求可发邮件至 <a href="mailto:info@pingcap.com">info@pingcap.com</a> 获取。</p>

<h3 id="1-1-14-tidb-对那些-mysql-variables-兼容">1.1.14 TiDB 对那些 MySQL variables 兼容？</h3>

<p>详细可参考：<a href="sql/variable.md">系统变量</a></p>

<h3 id="1-1-15-tidb-是否支持-select-for-update-吗">1.1.15 TiDB 是否支持 select for update 吗？</h3>

<p>支持，但语义上和 MySQL 有区别，TiDB 是分布式数据库，采用的乐观锁机制，也就说 select for update 不在事务开启就锁住数据，而是其他事务在提交的时候进行冲突检查，如有冲突，会进行回滚。</p>

<h3 id="1-1-16-tidb-的-codec-能保证-utf8-的字符串是-memcomparable-的吗-我们的-key-需要支持-utf8-有什么编码建议吗">1.1.16 TiDB 的 codec 能保证 UTF8 的字符串是 memcomparable 的吗？我们的 key 需要支持 UTF8，有什么编码建议吗？</h3>

<p>TiDB 字符集默认就是 UTF8 而且目前只支持 UTF8，字符串就是 memcomparable 格式的。</p>

<h2 id="1-2-tidb-原理">1.2 TiDB 原理</h2>

<h3 id="1-2-1-存储-tikv">1.2.1 存储 TiKV</h3>

<h4 id="1-2-1-1-tikv-详细解读">1.2.1.1 TiKV 详细解读</h4>

<p><a href="http://t.cn/RTKRRWv">http://t.cn/RTKRRWv</a></p>

<h3 id="1-2-2-计算-tidb">1.2.2 计算 TiDB</h3>

<h4 id="1-2-2-1-tidb-详细解读">1.2.2.1 TiDB 详细解读</h4>

<p><a href="http://t.cn/RTKRkBh">http://t.cn/RTKRkBh</a></p>

<h3 id="1-2-3-调度-pd">1.2.3 调度 PD</h3>

<h4 id="1-2-3-1-pd-详细解读">1.2.3.1 PD 详细解读</h4>

<p><a href="http://t.cn/RTKEZ0U">http://t.cn/RTKEZ0U</a></p>

<h1 id="二-安装部署升级">二、安装部署升级</h1>

<h2 id="2-1-环境准备">2.1 环境准备</h2>

<h3 id="2-1-1-操作系统版本要求">2.1.1 操作系统版本要求</h3>

<table>
<thead>
<tr>
<th><strong>Linux 操作系统平台</strong></th>
<th><strong>版本</strong></th>
</tr>
</thead>

<tbody>
<tr>
<td>Red Hat Enterprise Linux</td>
<td>7.3 及以上</td>
</tr>

<tr>
<td>CentOS</td>
<td>7.3 及以上</td>
</tr>

<tr>
<td>Oracle Enterprise Linux</td>
<td>7.3 及以上</td>
</tr>
</tbody>
</table>

<h4 id="2-1-1-1-为什么要在-centos-7-上部署-tidb-集群">2.1.1.1  为什么要在 CentOS 7 上部署 TiDB 集群？</h4>

<p>TiDB 作为一款开源分布式 NewSQL 数据库，可以很好的部署和运行在 Intel 架构服务器环境及主流虚拟化环境，并支持绝大多数的主流硬件网络，作为一款高性能数据库系统，TiDB 支持主流的 Linux 操作系统环境，具体可以参考 TiDB 的<a href="https://pingcap.com/docs-cn/op-guide/recommendation/">官方部署要求</a>。 其中 TiDB 在 CentOS 7.3 的环境下进行大量的测试，同时也有很多这个操作系统的部署最佳实践，因此，我们推荐客户在部署 TiDB 的时候使用 CentOS 7.3+ 以上的Linux 操作系统。</p>

<h3 id="2-1-2-硬件要求">2.1.2 硬件要求</h3>

<p>TiDB 支持部署和运行在 Intel x86-64 架构的 64 位通用硬件服务器平台。对于开发，测试，及生产环境的服务器硬件配置有以下要求和建议：</p>

<h4 id="2-1-2-1-开发及测试环境">2.1.2.1 开发及测试环境</h4>

<table>
<thead>
<tr>
<th><strong>组件</strong></th>
<th><strong>CPU</strong></th>
<th><strong>内存</strong></th>
<th><strong>本地存储</strong></th>
<th><strong>网络</strong></th>
<th><strong>实例数量(最低要求)</strong></th>
</tr>
</thead>

<tbody>
<tr>
<td>TiDB</td>
<td>8核+</td>
<td>16 GB+</td>
<td>SAS, 200 GB+</td>
<td>千兆网卡</td>
<td>1（可与 PD 同机器）</td>
</tr>

<tr>
<td>PD</td>
<td>8核+</td>
<td>16 GB+</td>
<td>SAS, 200 GB+</td>
<td>千兆网卡</td>
<td>1（可与 TiDB 同机器）</td>
</tr>

<tr>
<td>TiKV</td>
<td>8核+</td>
<td>32 GB+</td>
<td>SSD, 200 GB+</td>
<td>千兆网卡</td>
<td>3</td>
</tr>

<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td>服务器总计</td>
<td>4</td>
</tr>
</tbody>
</table>

<h4 id="2-1-2-2-线上环境">2.1.2.2 线上环境</h4>

<table>
<thead>
<tr>
<th><strong>组件</strong></th>
<th><strong>CPU</strong></th>
<th><strong>内存</strong></th>
<th><strong>硬盘类型</strong></th>
<th><strong>网络</strong></th>
<th><strong>实例数量(最低要求)</strong></th>
</tr>
</thead>

<tbody>
<tr>
<td>TiDB</td>
<td>16核+</td>
<td>48 GB+</td>
<td>SAS</td>
<td>万兆网卡（2块最佳）</td>
<td>2</td>
</tr>

<tr>
<td>PD</td>
<td>8核+</td>
<td>16 GB+</td>
<td>SSD</td>
<td>万兆网卡（2块最佳）</td>
<td>3</td>
</tr>

<tr>
<td>TiKV</td>
<td>16核+</td>
<td>48 GB+</td>
<td>SSD</td>
<td>万兆网卡（2块最佳）</td>
<td>3</td>
</tr>

<tr>
<td>监控</td>
<td>8核+</td>
<td>16 GB+</td>
<td>SAS</td>
<td>千兆网卡</td>
<td>1</td>
</tr>

<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td>服务器总计</td>
<td>9</td>
</tr>
</tbody>
</table>

<h4 id="2-1-2-3-2-块网卡的目的是-万兆的目的是">2.1.2.3 2 块网卡的目的是？万兆的目的是？</h4>

<p>作为一个分布式集群，TiDB 对时间的要求还是比较高的，尤其是 PD 需要分发唯一的时间戳，如果 PD 时间不统一，如果有 PD 切换，将会等待更长的时间。2 块网卡可以做 bond，保证数据传输的稳定，万兆可以保证数据传输的速度，千兆网卡容易出现瓶颈，我们强烈建议使用万兆网卡。</p>

<h4 id="2-1-2-4-ssd-不做-raid-是否可行">2.1.2.4 SSD 不做 RAID 是否可行？</h4>

<p>资源可接受的话，我们建议做 RAID 10，如果资源有限，也可以不做 RAID。</p>

<h2 id="2-2-安装部署">2.2 安装部署</h2>

<h3 id="2-2-1-ansible-部署方式-强烈推荐">2.2.1 Ansible 部署方式（强烈推荐）</h3>

<p>详细可参考：<a href="op-guide/ansible-deployment.md">TiDB Ansible 部署方案</a></p>

<h4 id="2-2-1-1-为什么修改了-tikv-pd-的-toml-配置文件-却没有生效">2.2.1.1 为什么修改了 TiKV/PD 的 toml 配置文件，却没有生效？</h4>

<p>这种情况一般是因为没有使用 <code>--config</code> 参数来指定配置文件（目前只会出现在 binary 部署的场景），TiKV/PD 会按默认值来设置。如果要使用配置文件，请设置 TiKV/PD 的 <code>--config</code> 参数。对于 TiKV 组件，修改配置后重启服务即可；对于 PD 组件，只会在第一次启动时读取配置文件，之后可以使用 pd-ctl 的方式来修改配置，详情可参考：<a href="https://pingcap.com/docs-cn/tools/pd-control/">https://pingcap.com/docs-cn/tools/pd-control/</a></p>

<h4 id="2-2-1-2-tidb-监控框架-prometheus-grafana-监控机器建议单独还是多台部署">2.2.1.2 TiDB 监控框架 Prometheus + Grafana 监控机器建议单独还是多台部署？</h4>

<p>监控机建议单独部署。建议 CPU 8 core，内存 16 GB 以上，硬盘 500 GB 以上。</p>

<h4 id="2-2-1-3-有一部分监控信息显示不出来">2.2.1.3 有一部分监控信息显示不出来？</h4>

<p>查看访问监控的机器时间跟集群内机器的时间差，如果比较大，更正时间后即可显示正常。</p>

<h4 id="2-2-1-4-supervise-svc-svstat-服务具体起什么作用">2.2.1.4 supervise/svc/svstat 服务具体起什么作用？</h4>

<ul>
<li>supervise 守护进程</li>
<li>svc 启停服务</li>
<li>svstat 查看进程状态</li>
</ul>

<h4 id="2-2-1-5-inventory-ini-变量参数解读">2.2.1.5 inventory.ini 变量参数解读</h4>

<table>
<thead>
<tr>
<th><strong>变量</strong></th>
<th><strong>含义</strong></th>
</tr>
</thead>

<tbody>
<tr>
<td>cluster_name</td>
<td>集群名称，可调整</td>
</tr>

<tr>
<td>tidb_version</td>
<td>TiDB 版本，TiDB-Ansible 各分支默认已配置</td>
</tr>

<tr>
<td>deployment_method</td>
<td>部署方式，默认为 binary，可选 docker</td>
</tr>

<tr>
<td>process_supervision</td>
<td>进程监管方式，默认为 systemd，可选 supervise</td>
</tr>

<tr>
<td>timezone</td>
<td>修改部署目标机器时区，默认为 Asia/Shanghai, 可调整，与set_timezone 变量结合使用</td>
</tr>

<tr>
<td>set_timezone</td>
<td>默认为 True，即修改部署目标机器时区，关闭可修改为 False</td>
</tr>

<tr>
<td>enable_elk</td>
<td>目前不支持，请忽略</td>
</tr>

<tr>
<td>enable_firewalld</td>
<td>开启防火墙，默认不开启</td>
</tr>

<tr>
<td>enable_ntpd</td>
<td>检测部署目标机器 NTP 服务，默认为 True，请勿关闭</td>
</tr>

<tr>
<td>machine_benchmark</td>
<td>检测部署目标机器磁盘 IOPS，默认为 True，请勿关闭</td>
</tr>

<tr>
<td>set_hostname</td>
<td>根据 IP 修改部署目标机器主机名，默认为 False</td>
</tr>

<tr>
<td>enable_binlog</td>
<td>是否部署 pump 并开启 binlog，默认为 False，依赖 Kafka 集群，参见 zookeeper_addrs 变量</td>
</tr>

<tr>
<td>zookeeper_addrs</td>
<td>binlog Kafka 集群的 zookeeper 地址</td>
</tr>

<tr>
<td>enable_slow_query_log</td>
<td>TiDB 慢查询日志记录到单独文件({{ deploy_dir }}/log/tidb_slow_query.log)，默认为 False，记录到 tidb 日志</td>
</tr>

<tr>
<td>deploy_without_tidb</td>
<td>KV 模式，不部署 TiDB 服务，仅部署 PD、TiKV 及监控服务，请将 inventory.ini 文件中 tidb_servers 主机组 IP 设置为空。</td>
</tr>
</tbody>
</table>

<h3 id="2-2-2-tidb-离线-ansible-部署方案">2.2.2 TiDB 离线 Ansible 部署方案</h3>

<p>首先这不是我们建议的方式，如果中控机没有外网，也可以通过离线 Ansible 部署方式，详情可参考：<a href="https://pingcap.com/docs-cn/op-guide/offline-ansible-deployment/">https://pingcap.com/docs-cn/op-guide/offline-ansible-deployment/</a></p>

<h3 id="2-2-3-docker-compose-快速构建集群-单机部署">2.2.3 Docker Compose 快速构建集群（单机部署）</h3>

<p>使用 docker-compose 在本地一键拉起一个集群，包括集群监控，还可以根据需求自定义各个组件的软件版本和实例个数，以及自定义配置文件，这种只限于开发环境，详细可参考：<a href="https://pingcap.com/docs-cn/op-guide/docker-compose/">官方文档</a>。</p>

<h2 id="2-3-升级">2.3 升级</h2>

<h3 id="2-3-1-如何使用-ansible-滚动升级">2.3.1 如何使用 Ansible 滚动升级？</h3>

<p>滚动升级 TiKV 节点( 只升级单独服务 )</p>

<p><code>ansible-playbook rolling_update.yml --tags=tikv</code></p>

<p>滚动升级所有服务</p>

<p><code>ansible-playbook rolling_update.yml</code></p>

<h3 id="2-3-2-滚动升级有那些影响">2.3.2 滚动升级有那些影响?</h3>

<p>滚动升级 TiDB 服务，滚动升级期间不影响业务运行，需要配置最小集群拓扑（TiDB * 2、PD * 3、TiKV * 3），如果集群环境中有 Pump/Drainer 服务，建议先停止 Drainer 后滚动升级（升级 TiDB 时会升级 Pump）。</p>

<h3 id="2-3-3-binary-如何升级">2.3.3 Binary 如何升级？</h3>

<p>Binary 不是我们建议的安装方式，对升级支持也不友好，建议换成 Ansible 部署。</p>

<h3 id="2-3-4-一般升级选择升级-tikv-还是所有组件都升级">2.3.4 一般升级选择升级 TiKV 还是所有组件都升级？</h3>

<p>常规需要一起升，因为整个版本都是一起测试的，单独升级只限当发生一个紧急故障时，需要单独对一个有问题的角色做升级。</p>

<h3 id="2-3-5-启动集群或者升级集群过程中出现-timeout-when-waiting-for-search-string-200-ok-是什么原因-如何处理">2.3.5 启动集群或者升级集群过程中出现 “Timeout when waiting for search string 200 OK” 是什么原因？如何处理？</h3>

<p>可能有以下几种原因：进程没有正常启动；端口被占用；进程没有正常停掉；停掉集群的情况下使用 rolling_update.yml 来升级集群（操作错误）。</p>

<p>处理方式：登录到相应节点查看进程或者端口的状态；纠正错误的操作步骤。</p>

<h1 id="三-集群管理">三、集群管理</h1>

<h2 id="3-1-集群日常管理">3.1 集群日常管理</h2>

<h3 id="3-1-1-ansible-常见运维操作有那些">3.1.1 Ansible 常见运维操作有那些？</h3>

<table>
<thead>
<tr>
<th><strong>任务</strong></th>
<th><strong>Playbook</strong></th>
</tr>
</thead>

<tbody>
<tr>
<td>启动集群</td>
<td>ansible-playbook start.yml</td>
</tr>

<tr>
<td>停止集群</td>
<td>ansible-playbook stop.yml</td>
</tr>

<tr>
<td>销毁集群</td>
<td>ansible-playbook unsafe_cleanup.yml (若部署目录为挂载点，会报错，可忽略）</td>
</tr>

<tr>
<td>清除数据(测试用)</td>
<td>ansible-playbook cleanup_data.yml</td>
</tr>

<tr>
<td>滚动升级</td>
<td>ansible-playbook rolling_update.yml</td>
</tr>

<tr>
<td>滚动升级 TiKV</td>
<td>ansible-playbook rolling_update.yml &ndash;tags=tikv</td>
</tr>

<tr>
<td>滚动升级除 PD 外模块</td>
<td>ansible-playbook rolling_update.yml &ndash;skip-tags=pd</td>
</tr>

<tr>
<td>滚动升级监控组件</td>
<td>ansible-playbook rolling_update_monitor.yml</td>
</tr>
</tbody>
</table>

<h3 id="3-1-2-tidb-如何登陆">3.1.2 TiDB 如何登陆？</h3>

<p>和 MySQL 登陆方式一样，可以按照下面例子进行登陆。</p>

<p><code>mysql -h 127.0.0.1 -uroot -P4000</code></p>

<h3 id="3-1-3-tidb-如何修改数据库系统变量">3.1.3 TiDB 如何修改数据库系统变量？</h3>

<p>和 MySQL 一样，TiDB 也分为静态参数和固态参数，静态参数可以直接通过<code>set global xxx = n</code>的方式进行修改，不过新参数值只限于该实例生命周期有效。</p>

<h3 id="3-1-4-tidb-tikv-有哪些数据目录">3.1.4 TiDB (TiKV) 有哪些数据目录？</h3>

<p>默认在 ${<a href="https://pingcap.com/docs-cn/op-guide/configuration/#data-dir-1">data-dir</a>}/data/ 目录下，其中包括 backup、db、raft、snap 四个目录，分别存储备份、数据、raft 数据及镜像数据。</p>

<h3 id="3-1-5-tidb-有哪些系统表">3.1.5 TiDB 有哪些系统表？</h3>

<p>和 MySQL 类似，TiDB 中也有系统表，用于存放数据库运行时所需信息，具体信息参考：<a href="https://pingcap.com/docs-cn/sql/system-database/">TiDB 系统数据库</a>文档。</p>

<h3 id="3-1-6-tidb-各节点服务器下是否有日志文件-如何管理">3.1.6 TiDB 各节点服务器下是否有日志文件，如何管理？</h3>

<p>默认情况下各节点服务器会在日志中输出标准错误，如果启动的时候通过 <code>--log-file</code> 参数指定了日志文件，那么日志会输出到指定的文件中，并且按天做 rotation。</p>

<h3 id="3-1-7-如何规范停止-tidb">3.1.7 如何规范停止 TiDB？</h3>

<p>如果是用 Ansible 部署的，可以使用 <code>ansible-playbook stop.yml</code> 命令停止 TiDB 集群。如果不是 Ansible 部署的，可以直接 kill 掉所有服务。如果使用 kill 命令，TiDB 的组件会做 graceful 的 shutdown。</p>

<h3 id="3-1-8-tidb-里面可以执行-kill-命令吗">3.1.8 TiDB 里面可以执行 kill 命令吗？</h3>

<p>可以 kill DML 语句，首先使用 <code>show processlist</code>，找到对应 session 的 id，然后执行 <code>kill id</code>。但是，目前不能 kill DDL 语句。DDL 语句一旦开始执行便不能停止，除非出错，出错以后会自动停止运行。</p>

<h3 id="3-1-9-tidb-是否支持会话超时">3.1.9 TiDB 是否支持会话超时？</h3>

<p>TiDB 暂不支持数据库层面的会话超时，目前想要实现超时，在没 LB（Load Balancing）的时候，需要应用侧记录发起的 Session 的 ID，通过应用自定义超时，超时以后需要到发起 Query 的节点上用 <code>kill id</code> 来杀掉 SQL。目前建议使用应用程序来实现会话超时，当达到超时时间，应用层就会抛出异常继续执行后续的程序段。</p>

<h3 id="3-1-10-tidb-生产环境的版本管理策略是怎么样的-如何尽可能避免频繁升级">3.1.10 TiDB 生产环境的版本管理策略是怎么样的？如何尽可能避免频繁升级？</h3>

<p>TiDB 版本目前逐步标准化，每次 Release 都包含详细的 Change log，版本功能 <a href="https://github.com/pingcap/TiDB/releases">变化详情</a>，生产环境是否有必要升级取决于业务系统，建议升级之前详细了解前后版本的功能差异。</p>

<p>版本号说明参考：Release Version: v1.0.3-1-ga80e796，v1.0.3 表示 GA 标准版 -1 表示该版本 commit 1 次，ga80e796 代表版本的 git-hash。</p>

<h3 id="3-1-11-分不清-tidb-master-版本之间的区别-经常用错-tidb-ansible-版本">3.1.11 分不清 TiDB master 版本之间的区别，经常用错 TiDB-Ansible 版本?</h3>

<p>TiDB 目前社区非常活跃，在 GA 版本发布后，还在不断的优化和修改 BUG，因此 TiDB 的版本更新周期比较快，会不定期有新版本发布，请关注我们的 <a href="https://pingcap.com/weekly/">新版本发布官方网站</a>。此外 TiDB 安装推荐使用 TiDB-Ansible 进行安装，TiDB-Ansible 的版本也会随着 TiDB 的版本发布进行更新，因此建议用户在安装升级新版本的时候使用最新的 TiDB-Ansible 安装包版本进行安装。 此外，在 TiDB 版本 GA 后，对 TiDB 的版本号进行了统一管理，TiDB 的版本可以通过几种方式进行查看：</p>

<ul>
<li>通过 <code>select tidb_version()</code> 进行查看；</li>
<li>通过执行 <code>tidb-server -V</code> 进行查看。</li>
</ul>

<h3 id="3-1-12-有没有图形化部署-tidb-的工具">3.1.12 有没有图形化部署 TiDB 的工具？</h3>

<p>暂时没有。</p>

<h3 id="3-1-13-tidb-如何进行水平扩展">3.1.13 TiDB 如何进行水平扩展？</h3>

<p>当您的业务不断增长时，数据库可能会面临三方面瓶颈，第一是存储空间，第二是计算资源，第三是读写容量，这时可以对 TiDB 集群做水平扩展。</p>

<ul>
<li>如果是存储资源不够，可以通过添加 TiKV Server 节点来解决，新节点启动后，PD 会自动将其他节点的部分数据迁移过去，无需人工介入。</li>
<li>如果是计算资源不够，可以查看 TiDB Server 和 TiKV Server 节点的 CPU 消耗情况，再考虑添加 TiDB Server 节点或者是 TiKV Server 节点来解决，如添加 TiDB Server 节点，将其添加到前端 Load Balancer 配置之中即可。</li>
<li>如果是容量跟不上，一般可以考虑同时增加 TiDB Server 和 TiKV Server 节点。</li>
</ul>

<h3 id="3-1-14-percolator-用了分布式锁-crash-的客户端会保持锁-会造成锁没有-release">3.1.14 Percolator 用了分布式锁，crash 的客户端会保持锁，会造成锁没有 release？</h3>

<p>详细可参考：<a href="https://pingcap.com/blog-cn/percolator-and-txn/">https://pingcap.com/blog-cn/percolator-and-txn/</a></p>

<h3 id="3-1-15-tidb-为什么选用-grpc-而不选用-thrift-是因为-google-在用吗">3.1.15 TiDB 为什么选用 gRPC 而不选用 Thrift，是因为 Google 在用吗？</h3>

<p>不只是因为 Google 在用，有一些比较好的特性我们需要，比如流控、加密还有 Streaming。</p>

<h3 id="3-1-16-like-bindo-customers-name-jason-92-这个92代表什么">3.1.16 like(bindo.customers.name, jason%, 92) 这个92代表什么？</h3>

<p>转义字符是那个，默认是 (ASCII 92)</p>

<h2 id="3-2-pd-管理">3.2 PD 管理</h2>

<h3 id="3-2-1-访问-pd-报错-tikv-cluster-is-not-bootstrapped">3.2.1 访问 PD 报错：TiKV cluster is not bootstrapped</h3>

<p>PD 的大部分 API 需要在初始化 TiKV 集群以后才能使用，如果在部署新集群的时候只启动了 PD，还没有启动 TiKV，这时候访问 PD 就会报这个错误。遇到这个错误应该先把要部署的 TiKV 启动起来，TiKV 会自动完成初始化工作，然后就可以正常访问 PD。</p>

<h3 id="3-2-2-pd-启动报错-etcd-cluster-id-mismatch">3.2.2 PD 启动报错：etcd cluster ID mismatch</h3>

<p>PD 启动参数中的 <code>--initial-cluster</code> 包含了某个不属于该集群的成员。遇到这个错误时请检查各个成员的所属集群，剔除错误的成员后即可正常启动。</p>

<h3 id="3-2-3-pd-能容忍的时间同步误差是多少">3.2.3 PD 能容忍的时间同步误差是多少？</h3>

<p>理论上误差越小越好，切换 leader 的时候如果时钟回退，就会卡住直到追上之前的 leader。这个容忍是业务上的，PD 多长的误差都能容忍。但是误差越大，主从切换的时候，停止服务的时间越长。</p>

<h3 id="3-2-4-client-连接是如何寻找-pd-的">3.2.4 Client 连接是如何寻找 PD 的？</h3>

<p>Client 连接只能通过 TiDB 访问集群，TiDB 负责连接 PD 与 TiKV，PD 与 TiKV 对 Client 透明。当 TiDB 连接任意一台 PD 的时候，PD 会告知 TiDB 当前的 leader 是谁，如果此台 PD 不是 leader，TiDB 将会重新连接至 leader PD。</p>

<h3 id="3-2-5-pd-参数中-leader-schedule-limit-和-region-schedule-limit-调度有什么区别">3.2.5 PD 参数中 leader-schedule-limit 和 region-schedule-limit 调度有什么区别？</h3>

<ul>
<li>leader-schedule-limit 调度是用来均衡不同 TiKV 的 leader 数，影响处理查询的负载。</li>
<li>region-schedule-limit 调度是均衡不同 TiKV 的副本数，影响不同节点的数据量。</li>
</ul>

<h3 id="3-2-6-每个-region-的-replica-数量可配置吗-调整的方法是">3.2.6 每个 region 的 replica 数量可配置吗？调整的方法是？</h3>

<p>可以，目前只能调整全局的 replica 数量。首次启动时 PD 会读配置文件（conf/pd.yml），使用其中的 max-replicas 配置，之后修改需要使用 pd-ctl 配置命令 <code>config set max-replicas $num</code>，配置后可通过 <code>config show all</code> 来查看已生效的配置。调整的时候，不会影响业务，会在后台添加，注意总 TiKV 实例数总是要大于等于设置的副本数，例如 3 副本需要至少 3 个 TiKV。增加副本数量之前需要预估额外的存储需求。pd-ctl 的详细用法可参考 <a href="https://pingcap.com/docs-cn/FAQ/tools/pd-control.md">PD Control 使用说明</a>。</p>

<h3 id="3-2-7-缺少命令行集群管理工具-整个集群的健康度当前是否正常-不好确认">3.2.7 缺少命令行集群管理工具，整个集群的健康度当前是否正常，不好确认？</h3>

<p>可以通过 pd-ctl 等工具来判断集群大概的状态，详细的集群状态还是需要通过监控来确认。</p>

<h3 id="3-2-8-集群下线节点后-怎么删除老集群节点监控信息">3.2.8 集群下线节点后，怎么删除老集群节点监控信息？</h3>

<p>下线节点一般指 TiKV 节点通过 pd-ctl 或者监控判断节点是否下线完成。节点下线完成后，手动停止下线节点上相关的服务。从 Prometheus 配置文件中删除对应节点的 node_exporter 信息。从 Ansible inventory.ini 中删除对应节点的信息。</p>

<h2 id="3-3-tidb-server-管理">3.3 TiDB server 管理</h2>

<h3 id="3-3-1-tidb-的-lease-参数应该如何设置">3.3.1 TiDB 的 lease 参数应该如何设置？</h3>

<p>启动 TiDB Server 时，需要通过命令行参数设置 lease 参数（&ndash;lease=60），其值会影响 DDL 的速度（只会影响当前执行 DDL 的 session，其他的 session 不会受影响）。在测试阶段，lease 的值可以设为 1s，加快测试进度；在生产环境下，我们推荐这个值设为分钟级（一般可以设为 60），这样可以保证 DDL 操作的安全。</p>

<h3 id="3-3-2-为什么有的时候执行-ddl-会很慢">3.3.2 为什么有的时候执行 DDL 会很慢？</h3>

<p>可能原因如下：</p>

<ul>
<li>多个 DDL 语句一起执行的时候，后面的几个 DDL 语句会比较慢。原因是当前 TiDB 集群中 DDL 操作是串行执行的。</li>
<li>在正常集群启动后，第一个 DDL 操作的执行时间可能会比较久，一般在 30s 左右，这个原因是刚启动时 TiDB 在竞选处理 DDL 的 leader。</li>
<li>在滚动升级或者停机升级时，由于停机顺序（先停 PD 再停 TiDB）或者用 <code>kill -9</code> 指令停 TiDB 导致 TiDB 没有及时清理注册数据，那么会影响 TiDB 启动后 10min 内的 DDL 语句处理时间。这段时间内运行 DDL 语句时，每个 DDL 状态变化都需要等待 2 * lease（默认 lease = 10s）。</li>
<li>当集群中某个 TiDB 与 PD 之间发生通讯问题，即 TiDB 不能从 PD 及时获取或更新版本信息，那么这时候 DDL 操作的每个状态处理需要等待 2 * lease。</li>
</ul>

<h3 id="3-3-3-tidb-可以使用-s3-作为后端存储吗">3.3.3 TiDB 可以使用 S3 作为后端存储吗？</h3>

<p>不可以，目前 TiDB 只支持分布式存储引擎和 Goleveldb/Rocksdb/Boltdb 引擎；</p>

<h3 id="3-3-4-infomation-schema-能否支持更多真实信息">3.3.4 Infomation_schema 能否支持更多真实信息？</h3>

<p>Infomation_schema 库里面的表主要是为了兼容 MySQL 而存在，有些第三方软件会查询里面的信息。在目前 TiDB 的实现中，里面大部分只是一些空表。后续随着 TiDB 的升级，会提供更多的参数信息。当前 TiDB 支持的：Infomation_schema 请参考<a href="https://pingcap.com/docs-cn/sql/system-database">TiDB 系统数据库说明文档</a>。</p>

<h3 id="3-3-5-tidb-backoff-type-主要原因">3.3.5 TiDB Backoff type 主要原因?</h3>

<p>TiDB-server 与 TiKV-server 随时进行通讯，在进行大量数据操作过程中，会出现 Server is busy 或者 backoff.maxsleep 20000ms 的日志提示信息，这是由于 TiKV-server 在处理过程中系统比较忙而出现的提示信息，通常这时候可以通过系统资源监控到 TiKV 主机系统资源使用率比较高的情况出现。如果这种情况出现，可以根据资源使用情况进行相应的扩容操作。</p>

<h3 id="3-3-6-tidb-ticlient-type-主要原因">3.3.6 TiDB TiClient type 主要原因？</h3>

<p>TiClient Region Error 该指标描述的是在 TiDB-server 作为客户端通过 KV 接口访问 TiKV-server 进行数据操作过程中，TiDB-server 操作 TiKV-server 中的 Region 数据出现的错误类型与 mertic 指标，错误类型包括 not_leader、stale_epoch。出现这些错误的情况是当 TiDB-server 根据自己的缓存信息去操作 Region leader 数据的时候，Region leader 发生了迁移或者 TiKV 当前的 Region 信息与 TiDB 缓存的路由信息不一致而出现的错误提示。一般这种情况下，TiDB-server 都会自动重新从 PD 获取最新的路由数据，重做之前的操作。</p>

<h3 id="3-3-7-tidb-同时支持的最大并发连接数">3.3.7 TiDB 同时支持的最大并发连接数？</h3>

<p>当前版本 TiDB 没有最大连接数的限制，如果并发过大导致响应时间增加，可以通过增加 TiDB 节点进行扩容。</p>

<h2 id="3-4-tikv-管理">3.4 TiKV 管理</h2>

<h3 id="3-4-1-tikv-集群副本建议配置数量是多少-是不是最小高可用配置-3个-最好">3.4.1 TiKV 集群副本建议配置数量是多少，是不是最小高可用配置（3个）最好？</h3>

<p>一般建议 3 副本即可，副本升高，性能会有下降，但是安全性更高。是否设置更多副本需要看具体业务需要。</p>

<h3 id="3-4-2-tikv-启动报错-cluster-id-mismatch">3.4.2 TiKV 启动报错：cluster ID mismatch</h3>

<p>TiKV 本地存储的 cluster ID 和指定的 PD 的 cluster ID 不一致。在部署新的 PD 集群的时候，PD 会随机生成一个 cluster ID，TiKV 第一次初始化的时候会从 PD 获取 cluster ID 存储在本地，下次启动的时候会检查本地的 cluster ID 与 PD 的 cluster ID 是否一致，如果不一致则会报错并退出。出现这个错误一个常见的原因是，用户原先部署了一个集群，后来把 PD 的数据删除了并且重新部署了新的 PD，但是 TiKV 还是使用旧的数据重启连到新的 PD 上，就会报这个错误。</p>

<h3 id="3-4-3-tikv-启动报错-duplicated-store-address">3.4.3 TiKV 启动报错：duplicated store address</h3>

<p>启动参数中的地址已经被其他的 TiKV 注册在 PD 集群中了。造成该错误的常见情况：TiKV <code>--data-dir</code> 指定的路径下没有数据文件夹（删除或移动后没有更新 &ndash;data-dir），用之前参数重新启动该 TiKV。请尝试用 pd-ctl 的<a href="https://github.com/pingcap/pd/tree/master/pdctl#store-delete-store_id">store delete</a>功能，删除之前的 store, 然后重新启动 TiKV 即可。</p>

<h3 id="3-4-4-tikv-master-和-slave-用的是一样的压缩算法-为什么效果不一样">3.4.4 TiKV master 和 slave 用的是一样的压缩算法，为什么效果不一样?</h3>

<p>目前来看 master 有些文件的压缩率会高一些，这个取决于底层数据的分布和 RocksDB 的实现，数据大小偶尔有些波动是正常的，底层存储引擎会根据需要调整数据。</p>

<h3 id="3-4-5-tikv-block-cache-有哪些特性">3.4.5 TiKV block cache 有哪些特性？</h3>

<p>TiKV 使用了 RocksDB 的 Column Family (CF) 特性，KV 数据最终存储在默认 RocksDB 内部的 default、write、lock 3 个 CF 内。</p>

<ul>
<li>default CF 存储的是真正的数据，与其对应的参数位于 [rocksdb.defaultcf] 项中。</li>
<li>write CF 存储的是数据的版本信息（MVCC）、索引、小表相关的数据，相关的参数位于 [rocksdb.writecf] 项中。</li>
<li>lock CF 存储的是锁信息，系统使用默认参数。</li>
<li>Raft Rocksdb 实例存储 Raft log。default CF 主要存储的是 Raft log，与其对应的参数位于 [raftdb.defaultcf] 项中。</li>
<li>每个 CF 都有单独的 Block-cache，用于缓存数据块，加速 RocksDB 的读取速度，Block-cache 的大小通过参数 <code>block-cache-size</code> 控制，<code>block-cache-size</code> 越大，能够缓存的热点数据越多，对读取操作越有利，同时占用的系统内存也会越多。</li>
<li>每个 CF 有各自的 Write-buffer，大小通过 <code>write-buffer-size</code> 控制。</li>
</ul>

<h3 id="3-4-6-tikv-channel-full-是啥原因">3.4.6 TiKV channel full 是啥原因？</h3>

<ul>
<li>Raftstore 线程卡了，可以看一下 Raftstore 的 CPU 使用情况。</li>
<li>TiKV 太忙了（读取、写入、磁盘 IO 等），请求处理不过来。</li>
</ul>

<h3 id="3-4-7-tikv-频繁切换-region-leader-切换是啥原因">3.4.7 TiKV 频繁切换 Region leader 切换是啥原因？</h3>

<ul>
<li>网络问题导致节点间通信卡了，查看 Report failures 监控。</li>
<li>原主 Leader 的节点卡了，导致没有及时给 Follower 发送消息。</li>
<li>Raftstore 线程卡了。</li>
</ul>

<h3 id="3-4-8-leader-节点挂了会影响服务吗-会有多长时间的影响">3.4.8 Leader 节点挂了会影响服务吗？会有多长时间的影响？</h3>

<p>TiDB 使用 Raft 在多个副本之间做数据同步，从而保证数据的强一致，当一份备份出现问题时，其他的副本能保证数据的安全。通常 TiDB 配置每个 Region 为 3 副本，根据 Raft 协议，每个 Region 会选取一个 Leader 提供服务。但单个Region Leader 失效时，在最大 2 * lease time（leasetime 是 10 秒）时间后，通过 Raft 协议会很快选新的 Region Leader 提供服务。</p>

<h3 id="3-4-9-tikv-在分别在那些场景下占用大量-io-内存-cpu-超过参数配置的多倍">3.4.9 TiKV 在分别在那些场景下占用大量 IO、内存、CPU（超过参数配置的多倍）？</h3>

<p>在大量写入、读取的场景中会占用大量的磁盘 IO、内存、CPU。在执行很复杂的查询，比如会产生很大中间结果集的情况下，会消耗很多的内存和 CPU 资源。</p>

<h3 id="3-4-10-tikv-是否可以使用-sas-sata-盘或者进行-ssd-sas-混合部署">3.4.10 TiKV 是否可以使用 SAS/SATA 盘或者进行 SSD/SAS 混合部署？</h3>

<p>不可以使用，TiDB 在进行 OLTP 场景中，数据访问和操作需要高 IO 磁盘的支持，TiDB 作为强一致的分布式数据库，存在一定的写放大，如副本复制、存储底层 Compaction，因此，TiDB 部署的最佳实践中推荐用户使用 NVMe SSD 磁盘作为数据存储磁盘。另外，TiKV 与 PD 不能混合部署。</p>

<h3 id="3-4-11-数据表-key-的-range-范围划分是在数据接入之前就已经划分好了吗">3.4.11 数据表 Key 的 Range 范围划分是在数据接入之前就已经划分好了吗？</h3>

<p>不是的，这个和 MySQL 分表规则不一样，需要提前设置好，TiKV 是根据 Region 的大小动态分裂的。</p>

<h3 id="3-4-12-region-是如何进行分裂的">3.4.12 Region 是如何进行分裂的？</h3>

<p>首先不是前期划分好的，但确实有 Region 分裂机制，有一个参数 <code>region_split_size</code>，超过这个值就会触发分裂，分裂后的信息会汇报给 PD。</p>

<h3 id="3-4-13-tikv-是否有类似-mysql-的-innodb-flush-log-trx-commit-参数-来保证提交数据不丢失">3.4.13 TiKV 是否有类似 MySQL 的 <code>innodb_flush_log_trx_commit</code> 参数，来保证提交数据不丢失？</h3>

<p>是的，TiKV 单机的存储引擎目前使用两个 RocksDB 实例，其中一个存储 raft-log，TiKV 有个 sync-log 参数，在ture 的情况下，每次提交都会强制刷盘到 raft-log，如果发生 crash 后，通过 raft-log 进行 KV 数据的恢复。</p>

<h3 id="3-4-14-对-wal-存储有什么推荐的硬件配置-例如-ssd-raid-级别-raid-卡-cache-策略-numa-设置-文件系统选择-操作系统的-io-调度策略等">3.4.14 对 WAL 存储有什么推荐的硬件配置，例如 SSD，RAID 级别，RAID 卡 cache 策略，NUMA 设置 ,文件系统选择，操作系统的 IO 调度策略等？</h3>

<p>WAL 属于顺序写，目前我们并没有单独对他进行配置，建议 SSD，RAID 如果允许的话，最好是 RAID 10，RAID 卡 cache、操作系统 I/O 调度目前没有针对性的最佳实践，Linux 7 以上默认配置即可，NUMA 没有特别建议，NUMA 内存分配策略可以尝试使用 <code>interleave = all</code>，文件系统建议 ext4。</p>

<h3 id="3-4-15-在最严格-sync-log-ture-的数据可用模式下-写入性能如何">3.4.15 在最严格 sync-log = ture 的数据可用模式下，写入性能如何？</h3>

<p>一般来说开启 sync-log 性能损耗大概 30% 左右，官方有个 <code>sync-log = false</code> 的基准测试，可以参考：<a href="https://github.com/pingcap/docs-cn/blob/master/benchmark/sysbench.md">https://github.com/pingcap/docs-cn/blob/master/benchmark/sysbench.md</a></p>

<h3 id="3-4-16-是否可以利用上层的-raft-多副本-达到完全的数据可靠-单机存储引擎不需要最严格模式">3.4.16 是否可以利用上层的 Raft + 多副本，达到完全的数据可靠，单机存储引擎不需要最严格模式？</h3>

<p>Raft 是强一致复制，写入必须同时超过 50% 的节点接受、应用才返回 ACK（三节点中二节点），在这种情况下，数据一致性是可以保证的，但理论上两个节点也可能同时Crash，所以在诸如金融行业对数据零容忍的场景，还是需要开启 sync-log。</p>

<h3 id="3-4-17-使用-raft-协议-数据写入会有多次网络的-roundtrip-实际写入延迟如何">3.4.17 使用 Raft 协议，数据写入会有多次网络的 roundtrip，实际写入延迟如何？</h3>

<p>理论上和单机数据库比，多四个网络延迟。</p>

<h3 id="3-4-18-有没有类似-mysql-的-innodb-memcached-plugin-可以直接使用-kv-接口-可以不需要独立的-cache">3.4.18 有没有类似 MySQL 的 innodb Memcached plugin，可以直接使用 KV 接口，可以不需要独立的 Cache？</h3>

<p>TiKV 支持单独进行接口调用，理论上也可以起个实例做为 Cache，但 TiDB 最大的价值是分布式关系型数据库，我们原则上不对 TiKV 单独进行支持。</p>

<h3 id="3-4-19-coprocessor-组件的主要作用">3.4.19 Coprocessor 组件的主要作用？</h3>

<ul>
<li>减少 TiDB 与 TiKV 之间的数据传输。</li>
<li>计算下推，充分利用 TiKV 的分布式计算资源。</li>
</ul>

<h2 id="3-5-tidb-测试">3.5 TiDB 测试</h2>

<h3 id="3-5-1-tidb-sysbench-基准测试结果如何">3.5.1 TiDB Sysbench 基准测试结果如何？</h3>

<p>很多用户在接触 TiDB 都习惯做一个基准测试或者 TiDB 与 MySQL 的对比测试，官方也做了一个类似测试，汇总很多测试结果后，我们发现虽然测试的数据有一定的偏差，但结论或者方向基本一致，由于 TiDB 与 MySQL 由于架构上的差别非常大，很多方面是很难找到一个基准点，所以官方的建议两点：</p>

<ul>
<li>大家不要用过多精力纠结这类基准测试上，应该更多关注 TiDB 的场景上的区别。</li>
<li>大家可以直接参考官方相关测试。官方 Sysbench 测试及 TiDB 与 MySQL 对比测试请参考：
<a href="https://github.com/pingcap/docs-cn/blob/master/benchmark/sysbench.md">https://github.com/pingcap/docs-cn/blob/master/benchmark/sysbench.md</a></li>
</ul>

<h3 id="3-5-2-tidb-集群容量-qps-与节点数之间关系如何-和-mysql-对比如何">3.5.2 TiDB 集群容量 QPS 与节点数之间关系如何，和 MySQL 对比如何？</h3>

<ul>
<li>在 10 节点内，TiDB 写入能力（Insert TPS）和节点数量基本成 40% 线性递增，MySQL 由于是单节点写入，所以不具备写入扩展能力。</li>
<li>MySQL 读扩容可以通过添加从库进行扩展，但写流量无法扩展，只能通过分库分表，而分库分表有很多问题，具体参考：<a href="http://t.cn/RTD18qV">http://t.cn/RTD18qV</a>。</li>
<li>TiDB 不管是读流量、还是写流量都可以通过添加节点快速方便的进行扩展。</li>
</ul>

<h3 id="3-5-3-我们的-dba-测试过-mysql-性能-单台-tidb-的性能没有-mysql-性能那么好">3.5.3 我们的 DBA 测试过 MySQL 性能，单台 TiDB 的性能没有 MySQL 性能那么好？</h3>

<p>TiDB 设计的目标就是针对 MySQL 单台容量限制而被迫做的分库分表的场景，或者需要强一致性和完整分布式事务的场景。它的优势是通过尽量下推到存储节点进行并行计算。对于小表（比如千万级以下），不适合 TiDB， 因为数据量少，Region 有限，发挥不了并行的优势，最极端的就是计数器表，几行记录高频更新，这几行在 TiDB 里，会变成存储引擎上的几个 KV，然后只落在一个 Region 里，而这个 Region 只落在一个节点上。加上后台强一致性复制的开销，TiDB 引擎到 TiKV 引擎的开销，最后表现出来的就是没有单个 MySQL 好。</p>

<h2 id="3-6-tidb-备份恢复">3.6 TiDB 备份恢复</h2>

<h3 id="3-6-1-tidb-主要备份方式">3.6.1 TiDB 主要备份方式？</h3>

<p>目前 TiDB 主要依赖 mydumper 逻辑导出进行备份，具体可以参考 <a href="https://github.com/maxbube/mydumper">https://github.com/maxbube/mydumper</a>，虽然 TiDB 也支持使用 MySQL 官方的 mysqldump 工具来进行数据的备份恢复工作，但相比于 mydumper/loader，性能会慢很多，大量数据的备份恢复会花费很多时间，这里我们并不推荐。</p>

<p>使用 mydumper 导出来的数据文件尽可能的小, 最好不要超过 64M, 可以设置参数 -F 64；</p>

<p>loader的 -t 参数可以根据 TiKV 的实例个数以及负载进行评估调整，例如 3 个 TiKV 的场景， 此值可以设为 3 * (1 ～ n)，当 TiKV 负载过高，loader 以及 TiDB 日志中出现大量 <code>backoffer.maxSleep 15000ms is exceeded</code> 可以适当调小该值，当 TiKV 负载不是太高的时候，可以适当调大该值。</p>

<h1 id="四-数据-流量迁移">四、数据、流量迁移</h1>

<h2 id="4-1-全量数据导出导入">4.1 全量数据导出导入</h2>

<h3 id="4-1-1-mydumper-工具">4.1.1 Mydumper 工具</h3>

<p>具体可以参考 <a href="https://github.com/maxbube/mydumper">https://github.com/maxbube/mydumper</a></p>

<h3 id="4-1-2-loader-工具">4.1.2 Loader 工具</h3>

<p>具体可以参考 <a href="https://www.pingcap.com/docs-cn/tools/loader/">https://www.pingcap.com/docs-cn/tools/loader/</a></p>

<h3 id="4-1-3-如何将一个运行在-mysql-上的应用迁移到-tidb-上">4.1.3 如何将一个运行在 MySQL 上的应用迁移到 TiDB 上？</h3>

<p>TiDB 支持绝大多数 MySQL 语法，一般不需要修改代码。我们提供了一个<a href="https://github.com/pingcap/tidb-tools/tree/master/checker">检查工具</a>，用于检查 MySQL 中的 Schema 是否和 TiDB 兼容。</p>

<h3 id="4-1-4-不小心把-mysql-的-user-表导入到-tidb-了-或者忘记密码-无法登陆-如何处理">4.1.4 不小心把 MySQL 的 user 表导入到 TiDB 了，或者忘记密码，无法登陆，如何处理？</h3>

<p>重启 TiDB 服务，配置文件中增加 <code>-skip-grant-table=true</code> 参数，无密码登陆集群后，可以根据情况重建用户，或者重建 mysql.user 表，具体表结构搜索官网。</p>

<h3 id="4-1-5-如何导出-tidb-数据">4.1.5 如何导出 TiDB 数据？</h3>

<p>TiDB 目前暂时不支持 <code>select into outfile</code>，可以通过以下方式导出 TiDB 数据：参考 <a href="http://blog.csdn.net/xin_yu_xin/article/details/7574662">MySQL使用mysqldump导出某个表的部分数据</a>，使用 mysqldump 加 where 条件导出，使用 MySQL client 将 select 的结果输出到一个文件。</p>

<h3 id="4-1-6-db2-oracle-数据库如何迁移到-tidb">4.1.6 DB2、Oracle 数据库如何迁移到 TiDB？</h3>

<p>DB2、Oracle 到 TiDB 数据迁移（增量+全量），通常做法有：</p>

<ul>
<li>使用 Oracle 官方迁移工具，如 OGG、Gateway（透明网关）、CDC（Change Data Capture）。</li>
<li>自研数据导出导入程序实现。</li>
<li>导出（Spool）成文本文件，然后通过 Load infile 进行导入。</li>
<li>使用第三方数据迁移工具。</li>
</ul>

<p>目前看来 OGG 最为合适。</p>

<h2 id="4-2-增量数据同步">4.2 增量数据同步</h2>

<h3 id="4-2-1-syncer-架构">4.2.1 Syncer 架构</h3>

<p>详细参考：<a href="https://pingcap.com/blog-cn/tidb-syncer/">https://pingcap.com/blog-cn/tidb-syncer/</a></p>

<h4 id="4-2-1-1-syncer-使用文档">4.2.1.1 Syncer 使用文档</h4>

<p>详细参考：<a href="https://pingcap.com/docs-cn/tools/syncer/">https://pingcap.com/docs-cn/tools/syncer/</a></p>

<h4 id="4-2-1-2-如何配置监控-syncer-运行情况">4.2.1.2 如何配置监控 Syncer 运行情况？</h4>

<p>下载 <a href="https://github.com/pingcap/docs/blob/master/etc/Syncer.json">Syncer Json</a> 导入到 Grafana，修改 Prometheus 配置文件，添加以下内容：</p>

<ul>
<li>job_name: &#39;syncer_ops&#39; // 任务名字
static_configs:</li>
<li>targets: [&#39;10.10.1.1:10096&#39;] //syncer监听地址与端口，通知 prometheus 拉取 syncer 的数据。</li>
</ul>

<p>重启 Prometheus 即可。</p>

<h4 id="4-2-1-3-有没有现成的同步方案-可以将数据同步到-hbase-elasticsearh-等其他存储">4.2.1.3 有没有现成的同步方案，可以将数据同步到 Hbase、Elasticsearh 等其他存储？</h4>

<p>没有，目前依赖程序自行实现。</p>

<h3 id="4-2-2-wormhole-工具">4.2.2 Wormhole 工具</h3>

<p>Wormhole 是一项数据同步服务，让用户能够通过 Web 控制台, 轻松操作数据的全量 + 增量同步，支持多种同、异构数据源之间的数据迁移，如 MySQL -&gt; TiDB，MongoDB -&gt; TiDB。具体可联系官方进行试用：<a href="mailto:info@pingcap.com">info@pingcap.com</a>。</p>

<h2 id="4-3-业务流量迁入">4.3 业务流量迁入</h2>

<h3 id="4-3-1-如何快速迁移业务流量">4.3.1 如何快速迁移业务流量？</h3>

<p>我们建议通过 Syncer 或 Wormhole 搭建成多源 MySQL、MongoDB -&gt; TiDB 实时同步环境，读写流量可以按照需求分阶段通过修改网络配置进行流量迁移，建议 DB 上层部署一个稳定的网络 LB（HAproxy、LVS、F5、DNS 等），这样直接修改网络配置就能实现无缝流量迁移。</p>

<h3 id="4-3-2-tidb-总读写流量有限制吗">4.3.2 TiDB 总读写流量有限制吗？</h3>

<p>TiDB 读流量可以通过增加 TiDB server 进行扩展，总读容量无限制，写流量可以通过增加 TiKV 节点进行扩容，基本上写容量也没有限制。</p>

<h3 id="4-3-3-transaction-too-large-是什么原因-怎么解决">4.3.3 Transaction too large 是什么原因，怎么解决？</h3>

<p>由于分布式事务要做两阶段提交，并且底层还需要做 Raft 复制，如果一个事务非常大，会使得提交过程非常慢，并且会卡住下面的 Raft 复制流程。为了避免系统出现被卡住的情况，我们对事务的大小做了限制：</p>

<ul>
<li>单条 KV entry 不超过 6MB</li>
<li>KV entry 的总条数不超过 30w</li>
<li>KV entry 的总大小不超过 100MB</li>
</ul>

<p>在 Google 的 Cloud Spanner 上面，也有类似的<a href="https://cloud.google.com/spanner/docs/limits">限制</a>。</p>

<h3 id="4-3-4-如何批量导入">4.3.4 如何批量导入?</h3>

<p>导入数据的时候，可以分批插入，每批最好不要超过 1w 行。</p>

<p>对于 insert 和 select，可以开启 <code>set @@session.tidb_batch_insert=1;</code> 隐藏参数，insert 会把大事务分批执行。这样不会因为事务太大而超时，但是可能会导致事务原子性的丢失。如果事务执行过程中报错，会导致只完成一部分事务的插入。所以建议只有在需要的时候，在 session 中使用，这样不会影响其他语句。事务完成以后，可以用 <code>set @@session.tidb_batch_insert=0</code> 关闭。</p>

<p>对 delete 和 update 语句，可以使用 limit 加循环的方式进行操作。</p>

<h3 id="4-3-5-tidb-中删除数据后会立即释放空间吗">4.3.5 TiDB 中删除数据后会立即释放空间吗？</h3>

<p>DELETE，TRUNCATE 和 DROP 都不会立即释放空间。对于 TRUNCATE 和 DROP 操作，在达到 TiDB 的 GC (garbage collection) 时间后（默认 10 分钟），TiDB 的 GC 机制会删除数据并释放空间。对于 DELETE 操作 TiDB 的 GC 机制会删除数据，但不会释放空间，而是当后续数据写入 RocksDB 且进行 compact 时对空间重新利用。</p>

<h3 id="4-3-6-load-数据时可以对目标表执行-ddl-操作吗">4.3.6 Load 数据时可以对目标表执行 DDL 操作吗？</h3>

<p>不可以，加载数据期间不能对目标表执行任何 DDL 操作，这会导致数据加载失败。</p>

<h3 id="4-3-7-tidb-是否支持-replace-into-语法">4.3.7 TiDB 是否支持 replace into 语法？</h3>

<p>支持，但是 load data 不支持 replace into 语法。</p>

<h3 id="4-3-8-数据删除后空间多长时间空间回收">4.3.8 数据删除后空间多长时间空间回收？</h3>

<p>Delete，Truncate 和 Drop 都不会立即释放空间，对于 Truncate 和 Drop 操作，在达到 TiDB 的 GC (Garbage Collection) 时间后（默认 10 分钟），TiDB 的 GC 机制会删除数据并释放空间。对于 Delete 操作 TiDB 的 GC 机制会删除数据，但不会释放空间，而是当后续数据写入 RocksDB 且进行 Compact 时对空间重新利用。</p>

<h3 id="4-3-9-数据删除后查询速度为何会变慢">4.3.9 数据删除后查询速度为何会变慢？</h3>

<p>大量删除数据后，会有很多无用的 key 存在，影响查询效率。目前正在开发 Region Merge 功能，完善之后可以解决这个问题，具体看参考 <a href="https://pingcap.com/blog-cn/tidb-best-practice/">最佳实践</a>中的删除数据部分。</p>

<h3 id="4-3-10-数据删除最高效最快的方式">4.3.10 数据删除最高效最快的方式？</h3>

<p>在删除大量数据的时候，建议使用 <code>Delete * from t where xx limit 5000</code>（xx 建议在满足业务过滤逻辑下，尽量加上强过滤索引列或者直接使用主键选定范围，如 <code>id &gt;= 5000*n+m and id &lt;= 5000*(n+1)+m</code> 这样的方案，通过循环来删除，用 <code>Affected Rows == 0</code> 作为循环结束条件，这样避免遇到事务大小的限制。如果一次删除的数据量非常大，这种循环的方式会越来越慢，因为每次删除都是从前向后遍历，前面的删除之后，短时间内会残留不少删除标记（后续会被 GC 掉），影响后面的 Delete 语句。如果有可能，建议把 Where 条件细化。可以参考官网 <a href="https://pingcap.com/blog-cn/tidb-best-practice/">最佳实践</a>。</p>

<h3 id="4-3-11-tidb-如何提高数据加载速度">4.3.11 TiDB 如何提高数据加载速度？</h3>

<p>主要三个方面：</p>

<ul>
<li>目前正在开发分布式导入工具 Lightning，需要注意的是数据导入过程中为了性能考虑，不会执行完整的事务流程，所以没办法保证导入过程中正在导入的数据的 ACID 约束，只能保证整个导入过程结束以后导入数据的 ACID 约束。因此适用场景主要为新数据的导入（比如新的表或者新的索引），或者是全量的备份恢复（先 Truncate 原表再导入）。</li>
<li>TiDB 的数据加载与磁盘以及整体集群状态相关，加载数据时应关注该主机的磁盘利用率，TiClient Error/Backoff/Thread CPU 等相关 metric，可以分析相应瓶颈。</li>
</ul>

<h1 id="五-sql-优化">五、SQL 优化</h1>

<h2 id="5-1-tidb-执行计划解读">5.1 TiDB 执行计划解读</h2>

<p>详细解读：<a href="https://pingcap.com/docs-cn/sql/understanding-the-query-execution-plan">https://pingcap.com/docs-cn/sql/understanding-the-query-execution-plan</a></p>

<h3 id="5-1-1-统计信息收集">5.1.1 统计信息收集</h3>

<p>详细解读：<a href="https://pingcap.com/docs-cn/sql/statistics">https://pingcap.com/docs-cn/sql/statistics</a></p>

<h3 id="5-1-2-count-如何加速">5.1.2 Count 如何加速？</h3>

<p>Count 就是暴力扫表，提高并发度能显著的提升速度，修改并发度可以参考 <code>tidb_distsql_scan_concurrency</code> 变量，但是也要看 CPU 和 I/O 资源。TiDB 每次查询都要访问 TiKV，在数据量小的情况下，MySQL 都在内存里，TiDB 还需要进行一次网络访问。</p>

<p>提升建议：</p>

<ul>
<li>建议提升硬件配置，可以参考<a href="op-guide/requirement.md">部署建议</a>。</li>
<li>提升并发度，默认是 10，可以提升到 50 试试，但是一般提升在 2-4 倍之间。</li>
<li>测试大数据量的 count。</li>
<li>调优 TiKV 配置，可以参考<a href="op-guide/tune-tikv.md">性能调优</a>。</li>
</ul>

<h3 id="5-1-3-查看添加索引进度">5.1.3 查看添加索引进度？</h3>

<p>通过 <code>admin show ddl</code> 查看当前添加索引 job。</p>

<h3 id="5-1-4-如何查看-ddl-job">5.1.4 如何查看 DDL job？</h3>

<p>可以使用 <code>admin show ddl</code>，语句查看正在运行的 DDL 作业。
<code>admin show ddl jobs</code>，用于查看当前 DDL 作业队列中的所有结果（包括正在运行以及等待运行的任务）以及已执行完成的 DDL 作业队列中的最近十条结果。</p>

<h3 id="5-1-5-tidb-是否支持基于-cost-的优化-cbo-如果支持-实现到什么程度">5.1.5 TiDB 是否支持基于 COST 的优化（CBO），如果支持，实现到什么程度？</h3>

<p>是的，TiDB 使用的基于成本的优化器（CBO），我们有一个小组单独会对代价模型、统计信息持续优化，除此之外，我们支持 hash join、soft merge 等关联算法。</p>

<h1 id="六-数据库优化">六、数据库优化</h1>

<h2 id="6-1-tidb">6.1 TiDB</h2>

<h3 id="6-1-1-tidb-参数及调整">6.1.1 TiDB 参数及调整</h3>

<p>详情参考：<a href="https://pingcap.com/docs-cn/sql/server-command-option">https://pingcap.com/docs-cn/sql/server-command-option</a></p>

<h2 id="6-2-tikv">6.2 TiKV</h2>

<h3 id="6-2-1-tikv-性能参数调优">6.2.1 TiKV 性能参数调优</h3>

<p>详情参考：<a href="https://pingcap.com/docs-cn/op-guide/tune-tikv/">https://pingcap.com/docs-cn/op-guide/tune-tikv/</a></p>

<h1 id="七-监控">七、监控</h1>

<h2 id="7-1-prometheus-监控框架">7.1 Prometheus 监控框架</h2>

<p>详细参考：<a href="https://pingcap.com/docs-cn/op-guide/monitor-overview">https://pingcap.com/docs-cn/op-guide/monitor-overview</a></p>

<h2 id="7-2-监控指标解读">7.2 监控指标解读</h2>

<p>详细参考：<a href="https://pingcap.com/docs-cn/op-guide/dashboard-overview-info">https://pingcap.com/docs-cn/op-guide/dashboard-overview-info</a></p>

<h3 id="7-2-1-目前的监控使用方式及主要监控指标-有没有更好看的监控">7.2.1 目前的监控使用方式及主要监控指标，有没有更好看的监控？</h3>

<p>TiDB 使用 Prometheus + Grafana 组成 TiDB 数据库系统的监控系统，用户在 Grafana 上通过 dashboard 可以监控到 TiDB 的各类运行指标，包括系统资源的监控指标，包括客户端连接与 SQL 运行的指标，包括内部通讯和 Region 调度的指标，通过这些指标，可以让数据库管理员更好的了解到系统的运行状态，运行瓶颈等内容。在监控指标的过程中，我们按照 TiDB 不同的模块，分别列出了各个模块重要的指标项，一般用户只需要关注这些常见的指标项。具体指标请参见 <a href="https://pingcap.com/docs-cn/op-guide/dashboard-overview-info/">官方文档</a>。</p>

<h3 id="7-2-2-prometheus-监控数据默认-1个月自动清除一次-可以自己设定成2个月或者手动删除吗">7.2.2 Prometheus 监控数据默认 1个月自动清除一次，可以自己设定成2个月或者手动删除吗？</h3>

<p>可以的，在 Prometheus 启动的机器上，找到启动脚本，然后修改启动参数，然后重启 Prometheus 生效。</p>

<h1 id="八-cloud-tidb">八、Cloud TiDB</h1>

<h2 id="8-1-腾讯云">8.1 腾讯云</h2>

<h3 id="8-1-1-目前-cloud-tidb-都有那些云厂商">8.1.1 目前 Cloud TiDB 都有那些云厂商？</h3>

<p>Cloud TiDB 目前已经在腾讯云、UCloud 上线，都是数据库一级入口，欢迎大家使用。</p>

<h1 id="九-故障排除">九、故障排除</h1>

<h2 id="9-1-tidb-自定义报错汇总">9.1 TiDB 自定义报错汇总</h2>

<h3 id="9-1-1-error-9001-hy000-pd-server-timeout">9.1.1 ERROR 9001 (HY000) : PD Server Timeout</h3>

<p>请求 PD 超时，请检查 PD Server 状态/监控/日志以及 TiDB Server 与 PD Server 之间的网络。</p>

<h3 id="9-1-2-error-9002-hy000-tikv-server-timeout">9.1.2 ERROR 9002 (HY000) : TiKV Server Timeout</h3>

<p>请求 TiKV 超时，请检查 TiKV Server 状态/监控/日志以及 TiDB Server 与 TiKV Server 之间的网络。</p>

<h3 id="9-1-3-error-9003-hy000-tikv-server-is-busy">9.1.3 ERROR 9003 (HY000) : TiKV Server is Busy</h3>

<p>TiKV 操作繁忙，一般出现在数据库负载比较高时，请检查 TiKV Server 状态/监控/日志。</p>

<h3 id="9-1-4-error-9004-hy000-resolve-lock-timeout">9.1.4 ERROR 9004 (HY000) : Resolve Lock Timeout</h3>

<p>清理锁超时，当数据库上承载的业务存在大量的事务冲突时，会遇到这种错误，请检查业务代码是否有锁争用。</p>

<h3 id="9-1-5-error-9005-hy000-region-is-unavaiable">9.1.5 ERROR 9005 (HY000) : Region is unavaiable</h3>

<p>访问的 Region 不可用，某个 Raft Group 不可用，如副本数目不足，出现在 TiKV 比较繁忙或者是 TiKV 节点停机的时候，请检查 TiKV Server 状态/监控/日志。</p>

<h3 id="9-1-6-error-9006-hy000-gc-too-early">9.1.6 ERROR 9006 (HY000) : GC Too Early</h3>

<p><code>GC Life Time</code> 间隔时间过短，长事务本应读到的数据可能被清理了，应增加 <code>GC Life Time</code>。</p>

<h2 id="9-2-mysql-原生报错汇总">9.2 MySQL 原生报错汇总</h2>

<h3 id="9-2-1-error-2013-hy000-lost-connection-to-mysql-server-during-query-问题的排查方法">9.2.1 ERROR 2013 (HY000): Lost connection to MySQL server during query 问题的排查方法？</h3>

<ul>
<li>log 中是否有 panic</li>
<li>dmesg 中是否有 oom，命令：<code>dmesg -T | grep -i oom</code></li>
<li>长时间没有访问，也会收到这个报错，一般是 tcp 超时导致的，tcp 长时间不用, 会被操作系统 kill。</li>
</ul>

<h3 id="9-2-2-error-1105-hy000-other-error-unknown-error-wire-error-invalidenumvalue-4004-是什么意思">9.2.2 ERROR 1105 (HY000): other error: unknown error Wire Error(InvalidEnumValue(4004)) 是什么意思？</h3>

<p>这类问题一般是 TiDB 和 TiKV 版本不匹配，在升级过程尽量一起升级，避免版本 mismatch。</p>

        </div>
        <div class="article-toc"></div>
        



  
    
      
      
      
      
      
      
      
      
      
      
      <div class="git-info">
        <a class="link" href="https://github.com/pingcap/docs-cn/blob/master/FAQ.md">"TiDB FAQ"</a>
        
          更新于
        
        <span>Feb 10 2018</span>:
        <a class="link" href="https://github.com/pingcap/docs-cn/commit/2c3ccf2d9ce0066ab6ea84418fb890babb820a0e">
          add faq
          <span class="hash">(2c3ccf2)</span>
        </a>
      </div>
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  



        <div class="operate">
    <div class="item">
        <a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fpingcap.com%2fdocs-cn%2fFAQ%2f" target="_blank">
          <i class="icon"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 481.6 481.6" xml:space="preserve" width="20" height="20">
<g>
	<path d="M381.6,309.4c-27.7,0-52.4,13.2-68.2,33.6l-132.3-73.9c3.1-8.9,4.8-18.5,4.8-28.4c0-10-1.7-19.5-4.9-28.5l132.2-73.8
		c15.7,20.5,40.5,33.8,68.3,33.8c47.4,0,86.1-38.6,86.1-86.1S429,0,381.5,0s-86.1,38.6-86.1,86.1c0,10,1.7,19.6,4.9,28.5
		l-132.1,73.8c-15.7-20.6-40.5-33.8-68.3-33.8c-47.4,0-86.1,38.6-86.1,86.1s38.7,86.1,86.2,86.1c27.8,0,52.6-13.3,68.4-33.9
		l132.2,73.9c-3.2,9-5,18.7-5,28.7c0,47.4,38.6,86.1,86.1,86.1s86.1-38.6,86.1-86.1S429.1,309.4,381.6,309.4z M381.6,27.1
		c32.6,0,59.1,26.5,59.1,59.1s-26.5,59.1-59.1,59.1s-59.1-26.5-59.1-59.1S349.1,27.1,381.6,27.1z M100,299.8
		c-32.6,0-59.1-26.5-59.1-59.1s26.5-59.1,59.1-59.1s59.1,26.5,59.1,59.1S132.5,299.8,100,299.8z M381.6,454.5
		c-32.6,0-59.1-26.5-59.1-59.1c0-32.6,26.5-59.1,59.1-59.1s59.1,26.5,59.1,59.1C440.7,428,414.2,454.5,381.6,454.5z"/>
</g>
</svg>
</i>
          <span>分享</span>
        </a>
    </div>
    <div class="item" onclick="window.print();">
        <a href="javascript:;">
          <i class="icon"><svg enable-background="new 0 0 36 36" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20">
    <defs>
        <path id="a" d="m7.6 14.6c.4 0 1-.4 1-.4s.6-.7.6-1.2c0-.9-.7-1.6-1.6-1.6s-1.6.7-1.6 1.6c0 .9.7 1.6 1.6 1.6z"/>
        <clipPath id="b">
            <use overflow="visible" xlink:href="#a"/>
        </clipPath>
        <clipPath id="c">
            <use overflow="visible" xlink:href="#d"/>
        </clipPath>
        <circle id="d" cx="12.6" cy="12.6" r="1.6"/>
    </defs>
    <g clip-path="url(#b)" fill="#040000">
        <path d="m1 6.4h13.2v13.2h-13.2z"/>
    </g>
    <g clip-path="url(#c)" fill="#040000">
        <path d="m6 6h13.2v13.2h-13.2z"/>
    </g>
    <path d="m30.4 28.8h-3.6v-2h3.6c1.7 0 3-1.3 3-3v-13c0-1.7-1.3-3-3-3h-24.8c-1.7 0-3 1.3-3 3v13c0 1.7 1.3 3 3 3h5.4v2h-5.4c-2.8 0-5-2.2-5-5v-13c0-2.8 2.2-5 5-5h24.7c2.8 0 5 2.2 5 5v13c .1 2.7-2.2 5-4.9 5z" fill="#040000"/>
    <path d="m25.4 36h-14.4c-1.1 0-2-.9-2-2v-15h18.5v15c0 1.1-.9 2-2.1 2zm-14.4-15v13h14.4v-13z" fill="#040000"/>
    <path d="m27.5 6.8h-2v-4.8h-14.5v4.6h-2v-4.6c0-1.1.9-2 2-2h14.4c1.1 0 2 .9 2 2v4.8z" fill="#040000"/>
</svg>
</i>
          <span>打印</span>
        </a>
    </div>
    <div class="item">
      
        <a href="http://download.pingcap.org/tidb-manual-cn.pdf?v=1518665097" download="tidb-manual-cn.pdf">
      
          <i class="icon"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 512 512" xml:space="preserve" width="20" height="20">
<g>
	<g>
		<path d="M498.966,339.946c-7.197,0-13.034,5.837-13.034,13.034v49.804c0,28.747-23.388,52.135-52.135,52.135H78.203
			c-28.747,0-52.135-23.388-52.135-52.135V352.98c0-7.197-5.835-13.034-13.034-13.034C5.835,339.946,0,345.782,0,352.98v49.804
			c0,43.121,35.082,78.203,78.203,78.203h355.594c43.121,0,78.203-35.082,78.203-78.203V352.98
			C512,345.782,506.165,339.946,498.966,339.946z"/>
	</g>
</g>
<g>
	<g>
		<path d="M419.833,391.3H92.167c-7.197,0-13.034,5.837-13.034,13.034s5.835,13.034,13.034,13.034h327.665
			c7.199,0,13.034-5.835,13.034-13.034C432.866,397.137,427.031,391.3,419.833,391.3z"/>
	</g>
</g>
<g>
	<g>
		<path d="M387.919,207.93c-4.795-5.367-13.034-5.834-18.404-1.038l-100.482,89.765V44.048c0-7.197-5.835-13.034-13.034-13.034
			c-7.197,0-13.034,5.835-13.034,13.034v252.609l-100.482-89.764c-5.367-4.796-13.607-4.328-18.404,1.038
			c-4.794,5.369-4.331,13.609,1.037,18.404l109.174,97.527c6.187,5.529,13.946,8.292,21.708,8.292
			c7.759,0,15.519-2.763,21.708-8.289l109.174-97.53C392.25,221.537,392.714,213.297,387.919,207.93z"/>
	</g>
</g>
</svg>
</i>
          <span>下载</span>
        </a>
    </div>
    <div class="item">
        <a href="mailto:info@pingcap.com">
          <i class="icon icon-mail"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 512 512" width="24" height="24">
<g>
	<g>
		<path d="M510.576,264.536l-58.431-157.94c-2.122-5.739-6.353-10.307-11.913-12.863c-5.559-2.556-11.78-2.796-17.519-0.672
			L137.796,198.467c-5.739,2.123-10.307,6.354-12.864,11.912c-2.556,5.559-2.795,11.781-0.672,17.519l58.431,157.94
			c2.122,5.739,6.353,10.307,11.913,12.864c3.05,1.403,6.299,2.107,9.559,2.107c2.682,0,5.37-0.476,7.961-1.435l284.918-105.406
			h0.001C508.886,289.585,514.958,276.382,510.576,264.536z M407.052,123.279l-88.377,126.344l-149.327-38.405L407.052,123.279z
			 M200.044,366.731l-50.683-137l117.382,30.192L200.044,366.731z M224.863,370.237l65.152-104.33l30.642,7.882
			c0.951,0.241,1.913,0.367,2.852,0.367c3.688,0,7.216-1.787,9.392-4.891l18.133-25.944l117.369,36.818L224.863,370.237z
			 M364.814,223.638l69.463-99.324l50.703,137.019L364.814,223.638z"/>
	</g>
</g>
<g>
	<g>
		<path d="M133.44,388.976c-2.194-5.933-8.786-8.961-14.715-6.768l-43.162,15.968c-5.933,2.196-8.962,8.784-6.768,14.716
			c1.71,4.623,6.086,7.482,10.743,7.482c1.319,0,2.663-0.23,3.973-0.715l43.16-15.968
			C132.606,401.498,135.635,394.909,133.44,388.976z"/>
	</g>
</g>
<g>
	<g>
		<path d="M75.023,282.646c-2.196-5.933-8.785-8.96-14.716-6.768l-26.643,9.857c-5.933,2.196-8.962,8.783-6.768,14.716
			c1.71,4.622,6.087,7.482,10.743,7.482c1.319,0,2.663-0.23,3.973-0.715l26.643-9.857C74.188,295.168,77.218,288.579,75.023,282.646
			z"/>
	</g>
</g>
<g>
	<g>
		<path d="M41.995,369.408c-2.196-5.933-8.785-8.962-14.716-6.768l-19.797,7.324c-5.933,2.196-8.962,8.784-6.768,14.716
			c1.71,4.622,6.086,7.482,10.743,7.482c1.319,0,2.663-0.23,3.973-0.715l19.797-7.324C41.161,381.929,44.19,375.341,41.995,369.408z
			"/>
	</g>
</g>
</svg>
</i>
          <span>反馈 </span>
        </a>
    </div>
</div>

    </div>

    <div class="sidebar-page sticky-sidebar">
      <a href="https://github.com/pingcap/docs-cn/edit/master/FAQ.md" class="improve-doc" target="_blank">
  <svg
	version="1.1"
	xmlns="http://www.w3.org/2000/svg"
	xmlns:xlink="http://www.w3.org/1999/xlink"
	x="0px"
	y="0px"
	width="14"
	height="14"
	fill="#142848"
	viewBox="0 0 275.836 275.836"
	style="enable-background:new 0 0 275.836 275.836;"
	xml:space="preserve">
	<g>
		<path
			d="M191.344,20.922l-95.155,95.155c-0.756,0.756-1.297,1.699-1.565,2.734l-8.167,31.454c-0.534,2.059,0.061,4.246,1.565,5.751
		c1.14,1.139,2.671,1.757,4.242,1.757c0.503,0,1.009-0.063,1.508-0.192l31.454-8.168c1.035-0.269,1.979-0.81,2.734-1.565
		l95.153-95.153c0.002-0.002,0.004-0.003,0.005-0.004s0.003-0.004,0.004-0.005l19.156-19.156c2.344-2.343,2.344-6.142,0.001-8.484
		L218.994,1.758C217.868,0.632,216.343,0,214.751,0c-1.591,0-3.117,0.632-4.242,1.758l-19.155,19.155
		c-0.002,0.002-0.004,0.003-0.005,0.004S191.346,20.921,191.344,20.922z M120.631,138.208l-19.993,5.192l5.191-19.993l89.762-89.762
		l14.801,14.802L120.631,138.208z M214.751,14.485l14.801,14.802l-10.675,10.675L204.076,25.16L214.751,14.485z"/>
		<path
			d="M238.037,65.022c-3.313,0-6,2.687-6,6v192.813H43.799V34.417h111.063c3.313,0,6-2.687,6-6s-2.687-6-6-6H37.799
		c-3.313,0-6,2.687-6,6v241.419c0,3.313,2.687,6,6,6h200.238c3.313,0,6-2.687,6-6V71.022
		C244.037,67.709,241.351,65.022,238.037,65.022z"/>
	</g>
</svg>

  修改本文
</a>

      <p class="toc-title">本页导航</p>
      <div id="smarttoc_wrapper"></div>
    </div>
  </div>
</div>

  
<section class="footer" id="footer">
  <div class="container">
    <div class="flex-list-wrap">
      <div class="flex-list">
        <h4 class="list-title"><strong>产品</strong></h4>
        <ul>
          <li><a href="https://pingcap.com/docs-cn/overview/#tidb-%e7%ae%80%e4%bb%8b">TiDB</a></li>
          <li><a href="https://pingcap.com/docs-cn/tispark/tispark-user-guide/">TiSpark</a></li>
          <li><a href="https://github.com/pingcap/docs-cn/blob/master/ROADMAP.md" target="_blank">TiDB 路线图</a></li>
        </ul>
      </div>
      <div class="flex-list">
        <h4 class="list-title"><strong>文档</strong></h4>
        <ul>
          <li><a href="https://pingcap.com/docs-cn/QUICKSTART/">快速入门</a></li>
          <li><a href="https://pingcap.com/blog-cn/tidb-best-practice/">最佳实践</a></li>
          <li><a href="https://pingcap.com/docs-cn/FAQ/">常见问题解答</a></li>
          <li><a href="https://pingcap.com/docs-cn/tools/syncer/">TiDB 周边工具</a></li>
          <li><a href="https://pingcap.com/docs-cn/releases/README/">版本发布说明</a></li>
        </ul>
      </div>
      <div class="flex-list">
        <h4 class="list-title"><strong>资源</strong></h4>
        <ul>
          <li><a href="https://pingcap.com/blog-cn/">博客</a></li>
          <li><a href="https://github.com/pingcap" target="_blank">GitHub</a></li>
          <li><a href="https://zhuanlan.zhihu.com/newsql" target="_blank">知乎专栏</a></li>
          
        </ul>
      </div>
      <div class="flex-list">
        <h4 class="list-title"><strong>公司</strong></h4>
        <ul>
          <li><a href="https://pingcap.com/about-cn/">关于</a></li>
          <li><a href="https://pingcap.com/recruit-cn/">招贤纳士</a></li>
          
          
        </ul>
      </div>
    </div>
    <div class="contact-list-wrap">
      <div class="flex-list">
        <h4 class="list-title"><strong>联系我们</strong></h4>
        <ul>
          <li><a href="https://twitter.com/PingCAP" class="twitter"  target="_blank"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 612 612" xml:space="preserve" width="18" height="18">
<g>
	<g>
		<path d="M612,116.258c-22.525,9.981-46.694,16.75-72.088,19.772c25.929-15.527,45.777-40.155,55.184-69.411    c-24.322,14.379-51.169,24.82-79.775,30.48c-22.907-24.437-55.49-39.658-91.63-39.658c-69.334,0-125.551,56.217-125.551,125.513    c0,9.828,1.109,19.427,3.251,28.606C197.065,206.32,104.556,156.337,42.641,80.386c-10.823,18.51-16.98,40.078-16.98,63.101    c0,43.559,22.181,81.993,55.835,104.479c-20.575-0.688-39.926-6.348-56.867-15.756v1.568c0,60.806,43.291,111.554,100.693,123.104    c-10.517,2.83-21.607,4.398-33.08,4.398c-8.107,0-15.947-0.803-23.634-2.333c15.985,49.907,62.336,86.199,117.253,87.194    c-42.947,33.654-97.099,53.655-155.916,53.655c-10.134,0-20.116-0.612-29.944-1.721c55.567,35.681,121.536,56.485,192.438,56.485    c230.948,0,357.188-191.291,357.188-357.188l-0.421-16.253C573.872,163.526,595.211,141.422,612,116.258z" />
	</g>
</g>
</svg>
 Twitter</a></li>
          <li><a href="https://www.linkedin.com/company/pingcap/" class="linkedin" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="18" height="18" viewBox="0 0 438.536 438.535" xml:space="preserve">
<g>
	<g>
		<rect x="5.424" y="145.895" width="94.216" height="282.932"/>
		<path d="M408.842,171.739c-19.791-21.604-45.967-32.408-78.512-32.408c-11.991,0-22.891,1.475-32.695,4.427
			c-9.801,2.95-18.079,7.089-24.838,12.419c-6.755,5.33-12.135,10.278-16.129,14.844c-3.798,4.337-7.512,9.389-11.136,15.104
			v-40.232h-93.935l0.288,13.706c0.193,9.139,0.288,37.307,0.288,84.508c0,47.205-0.19,108.777-0.572,184.722h93.931V270.942
			c0-9.705,1.041-17.412,3.139-23.127c4-9.712,10.037-17.843,18.131-24.407c8.093-6.572,18.13-9.855,30.125-9.855
			c16.364,0,28.407,5.662,36.117,16.987c7.707,11.324,11.561,26.98,11.561,46.966V428.82h93.931V266.664
			C438.529,224.976,428.639,193.336,408.842,171.739z"/>
		<path d="M53.103,9.708c-15.796,0-28.595,4.619-38.4,13.848C4.899,32.787,0,44.441,0,58.529c0,13.891,4.758,25.505,14.275,34.829
			c9.514,9.325,22.078,13.99,37.685,13.99h0.571c15.99,0,28.887-4.661,38.688-13.99c9.801-9.324,14.606-20.934,14.417-34.829
			c-0.19-14.087-5.047-25.742-14.561-34.973C81.562,14.323,68.9,9.708,53.103,9.708z"/>
	</g>
</g>
</svg>
 LinkedIn</a></li>
          <li><a href="https://www.reddit.com/r/TiDB/" class="reddit" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 279.748 279.748" xml:space="preserve" width="18" height="18">
<path d="M279.748,133.142c0-19.299-15.701-35-35-35c-10.768,0-20.674,4.812-27.279,13.064
	c-18.532-8.431-39.663-13.626-62.015-15.271l19.206-60.692l42.895,9.294c3.285,12.782,14.901,22.258,28.693,22.258
	c16.336,0,29.627-13.29,29.627-29.626c0-16.336-13.291-29.627-29.627-29.627c-11.801,0-21.999,6.941-26.759,16.95l-49.497-10.725
	c-5.041-1.092-10.094,1.833-11.651,6.756l-23.705,74.907c-26.164,0.638-50.988,6.053-72.356,15.775
	C55.674,102.954,45.768,98.142,35,98.142c-19.299,0-35,15.701-35,35c0,9.373,3.683,18.173,10.222,24.709
	c-3.9,8.37-5.875,17.076-5.875,25.936c0,24.048,14.396,46.492,40.538,63.199c25.447,16.264,59.183,25.221,94.989,25.221
	c35.808,0,69.542-8.957,94.989-25.221c26.142-16.707,40.538-39.151,40.538-63.199c0-8.859-1.975-17.565-5.875-25.936
	C276.065,151.314,279.748,142.515,279.748,133.142z M15.369,145.139c-2.212-3.59-3.369-7.688-3.369-11.997c0-12.682,10.317-23,23-23
	c5.444,0,10.558,1.851,14.649,5.258C35.027,123.702,23.517,133.689,15.369,145.139z M68.04,165.405c0-13.785,11.215-25,25-25
	c13.785,0,25,11.215,25,25c0,13.785-11.215,25-25,25C79.255,190.405,68.04,179.19,68.04,165.405z M191.159,222.459
	c-9.745,10.637-29.396,17.244-51.285,17.244c-21.888,0-41.539-6.607-51.284-17.244c-1.805-1.97-2.733-4.525-2.617-7.192
	c0.116-2.669,1.266-5.133,3.235-6.937c1.849-1.694,4.247-2.627,6.754-2.627c2.797,0,5.484,1.183,7.373,3.244
	c5.803,6.333,20.827,10.756,36.539,10.756c15.712,0,30.737-4.423,36.539-10.756c1.889-2.062,4.576-3.244,7.374-3.244
	c2.508,0,4.906,0.933,6.755,2.627c1.97,1.804,3.118,4.268,3.234,6.937C193.893,217.934,192.964,220.489,191.159,222.459z
	 M186.708,190.405c-13.785,0-25-11.215-25-25c0-13.785,11.215-25,25-25c13.785,0,25,11.215,25,25
	C211.708,179.19,200.493,190.405,186.708,190.405z M264.379,145.139c-8.147-11.45-19.657-21.436-34.28-29.739
	c4.092-3.408,9.205-5.258,14.649-5.258c12.683,0,23,10.318,23,23C267.748,137.451,266.591,141.549,264.379,145.139z"/>
</svg>
 Reddit</a></li>
          <li><a href="https://groups.google.com/forum/#!forum/tidb-user" class="google-plus" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 491.858 491.858" xml:space="preserve" width="18" height="18">
<g>
	<g>
		<g>
			<path d="M377.472,224.957H201.319v58.718H308.79c-16.032,51.048-63.714,88.077-120.055,88.077     c-69.492,0-125.823-56.335-125.823-125.824c0-69.492,56.333-125.823,125.823-125.823c34.994,0,66.645,14.289,89.452,37.346     l42.622-46.328c-34.04-33.355-80.65-53.929-132.074-53.929C84.5,57.193,0,141.693,0,245.928s84.5,188.737,188.736,188.737     c91.307,0,171.248-64.844,188.737-150.989v-58.718L377.472,224.957L377.472,224.957z" />
			<polygon points="491.858,224.857 455.827,224.857 455.827,188.826 424.941,188.826 424.941,224.857 388.91,224.857      388.91,255.74 424.941,255.74 424.941,291.772 455.827,291.772 455.827,255.74 491.858,255.74" />
		</g>
	</g>
</g>
</svg>
 Google Group</a></li>
          <li><a href="https://stackoverflow.com/questions/tagged/tidb" class="stack-overflow" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="18" height="18" viewBox="0 0 547.597 547.597" xml:space="preserve">
<g>
	<g>
		<path d="M140.81,475.111h0.024l189.91-0.269c8.434-0.013,15.3-6.886,15.3-15.318v-21.298c0-8.428-6.854-15.288-15.3-15.288
			l-189.91,0.264c-8.433,0.012-15.3,6.885-15.3,15.318v21.31C125.535,468.257,132.389,475.111,140.81,475.111z"/>
		<path d="M58.667,517.854c0.073,29.26,0.073,29.449,3.072,29.449c0.018,0,0.037,0,0.055,0l10.612,0.294c0.031,0,0.055,0,0.086,0
			c0,0,85.814,0,171.629-0.036c42.914-0.019,85.821-0.05,118-0.092c16.09-0.019,29.505-0.043,38.887-0.074
			c17.803-0.055,17.803-0.055,17.803-3.072l0.3-10.697V333.299c0-8.434-6.866-15.3-15.3-15.3h-11.909c-8.434,0-15.3,6.866-15.3,15.3
			V496.22c0,5.062-4.119,9.18-9.181,9.18H110.51c-5.061,0-9.18-4.118-9.18-9.18V333.299c0-8.434-6.867-15.3-15.3-15.3H73.82
			c-8.433,0-15.3,6.86-15.3,15.3c0,23.342,0.012,76.084,0.055,122.981C58.594,479.727,58.625,501.722,58.667,517.854z"/>
		<path d="M142.322,397.399l189.402,17.467c0.478,0.043,0.948,0.062,1.413,0.062c7.956,0,14.468-5.985,15.159-13.917l1.83-21.096
			c0.729-8.396-5.508-15.851-13.898-16.628l-189.102-17.461c-8.593-0.795-15.869,5.441-16.653,13.825l-1.97,21.108
			c-0.38,4.069,0.844,8.042,3.452,11.181C134.567,395.087,138.252,397.026,142.322,397.399z"/>
		<path d="M437.636,208.849c1.273,7.344,7.607,12.675,15.05,12.675c0.875,0,1.756-0.074,2.644-0.232l21.065-3.678
			c8.311-1.451,13.898-9.395,12.454-17.706L456.345,12.678c-1.42-8.207-9.21-13.917-17.692-12.448l-21.065,3.678
			c-8.311,1.451-13.898,9.395-12.454,17.705L437.636,208.849z"/>
		<path d="M190.333,194.375l163.6,96.708c2.356,1.396,5.049,2.136,7.778,2.136c5.393,0,10.447-2.876,13.183-7.509l10.876-18.36
			c2.08-3.519,2.674-7.631,1.658-11.591c-1.016-3.954-3.513-7.283-7.032-9.358l-163.6-96.714
			c-7.014-4.149-16.836-1.597-20.967,5.374l-10.869,18.36c-2.081,3.519-2.674,7.638-1.658,11.591
			C184.317,188.971,186.82,192.294,190.333,194.375z"/>
		<path d="M387.525,240.501c2.853,4.174,7.57,6.659,12.626,6.659c3.091,0,6.077-0.924,8.635-2.681l17.405-11.934
			c6.953-4.768,8.752-14.314,4.015-21.292L323.29,54.104c-4.584-6.732-14.498-8.623-21.236-3.984L284.317,62.33
			c-6.945,4.779-8.727,14.327-3.971,21.291L387.525,240.501z"/>
		<path d="M154.482,302.319l183.465,49.156c1.298,0.349,2.632,0.526,3.966,0.526c6.903,0,12.98-4.67,14.762-11.347l5.508-20.624
			c2.179-8.152-2.681-16.555-10.826-18.74l-183.465-49.162c-8.017-2.148-16.604,2.852-18.728,10.826l-5.508,20.63
			C141.477,291.726,146.336,300.135,154.482,302.319z"/>
	</g>
</g>
</svg>
 Stack Overflow</a></li>
          <li id="wechat"><a class="wechat" href="javascript:void(0)"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="18" height="18" viewBox="0 0 31.403 31.404" xml:space="preserve">
<g>
	<g>
		<path d="M31.403,21.306c0-4.597-4.388-8.32-9.8-8.32c-5.414,0-9.802,3.725-9.802,8.32c0,4.597,4.388,8.322,9.802,8.322    c1.701,0,3.302-0.369,4.697-1.019l3.863,1.671l-0.447-4.309C30.782,24.642,31.403,23.034,31.403,21.306z M18.301,19.052    c-0.771,0-1.395-0.625-1.395-1.395s0.623-1.395,1.395-1.395c0.77,0,1.393,0.625,1.393,1.395S19.069,19.052,18.301,19.052z     M24.905,19.052c-0.769,0-1.394-0.625-1.394-1.395s0.625-1.395,1.394-1.395c0.771,0,1.396,0.625,1.396,1.395    S25.676,19.052,24.905,19.052z" />
		<path d="M21.604,11.885c1.515,0,2.957,0.27,4.271,0.755c0.009-0.175,0.03-0.345,0.03-0.521c0-6.074-5.801-10.996-12.953-10.996    C5.799,1.123,0,6.044,0,12.119c0,2.284,0.822,4.408,2.229,6.167L1.638,23.98l5.104-2.213c1.264,0.59,2.661,0.986,4.136,1.189    c-0.111-0.538-0.179-1.087-0.179-1.65C10.7,16.111,15.591,11.885,21.604,11.885z M17.317,5.457c1.017,0,1.84,0.824,1.84,1.84    c0,1.018-0.823,1.842-1.84,1.842c-1.019,0-1.841-0.824-1.841-1.842C15.476,6.281,16.301,5.457,17.317,5.457z M8.586,9.139    c-1.017,0-1.84-0.824-1.84-1.842c0-1.016,0.823-1.84,1.84-1.84c1.018,0,1.841,0.824,1.841,1.84    C10.427,8.313,9.603,9.139,8.586,9.139z" />
	</g>
</g>
</svg>
 微信公众号</a> <div class="qr_code_outer f-hide">
    <div class="qr_code_inner">
        <div class="qr_code">
            <img id="js_qr_code_img" class="qr_code_img" src="https://download.pingcap.com/images/qrcode-min.jpg">
            <p>微信扫一扫<br> 微信ID：pingcap2015</p>
        </div>
    </div>
</div>
</li>
        </ul>
      </div>
      <div class="subscribe">
<style type="text/css" media="screen">
    #mc_embed_signup .response {
        margin-top: 12px;
        line-height: 1.4;
        font-size: 0.65rem;
    }
</style>
<div id="mc_embed_signup">
    <form action="//pingcap.us16.list-manage.com/subscribe/post?u=ab57beb8a88391cf6193c1b48&amp;id=7c67af4f9d" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
        <div id="mc_embed_signup_scroll">
            <div class="form-inline">
                <input type="email" value="" name="EMAIL" id="mce-EMAIL" class="form-control" placeholder="Subscribe to our newsletter">
                <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn btn-subscribe">
            </div>
            <div id="mce-responses" class="clear">
                <div class="response" id="mce-error-response" style="display:none"></div>
                <div class="response" id="mce-success-response" style="display:none"></div>
            </div>
            
            <div style="position: absolute; left: -5000px;" aria-hidden="true">
                <input type="text" name="b_ab57beb8a88391cf6193c1b48_7c67af4f9d" tabindex="-1" value="">
            </div>
        </div>
    </form>
</div>

<script type="text/javascript" src="https://download.pingcap.com/js/mc-validate.js"></script>
<script type='text/javascript'>
;(function($) {
  window.fnames = new Array()
  window.ftypes = new Array()
  fnames[0] = 'EMAIL'
  ftypes[0] = 'email'
  fnames[1] = 'FNAME'
  ftypes[1] = 'text'
  fnames[2] = 'LNAME'
  ftypes[2] = 'text'
})(jQuery)
var $mcj = jQuery.noConflict(true)
</script>

</div>
    </div>
  </div>
  <div class="container">
    <p class="copyright">&copy; 2018 北京平凯星辰科技发展有限公司</p>
    <a href="/docs/FAQ" class="btn-lang" id="lang">English</a>
  </div>
</section>
 <div class="overlay"></div><script src="https://download.pingcap.com/js/jquery.min.js"></script>  
<link rel="stylesheet" href="https://download.pingcap.com/style/docsearch.css" />

<script type="text/javascript" src="https://download.pingcap.com/js/docsearch.min.js"></script>
<script type="text/javascript">
docsearch({
  apiKey: 'ad5e63b76a221558bdc65ab1abbec7a2',
  indexName: 'pingcap',
  inputSelector: '#search-input',
  debug: true, 
  transformData: function(hits) {
    
    function isChinese(s) {
      var patrn = /\/.*-cn\//gi
      return patrn.exec(s)
    }

    
    function is404(h) {
      var patrn = /404/gi
      return h && h.lvl1 && patrn.exec(h.lvl1)
    }

    var cn_hits = hits.filter(function(hit) {
      return isChinese(hit.url) && !is404(hit.hierarchy)
    })

    return cn_hits
  }
})
</script>
  
<script>
window.ga =
  window.ga ||
  function() {
    ;(ga.q = ga.q || []).push(arguments)
  }
ga.l = +new Date()
ga('create', 'UA-99991864-4', 'auto')
ga('send', 'pageview')
</script>
<script async src="https://download.pingcap.com/js/ga-analytics.js"></script>

<script type="text/javascript" src="/js/app.js"></script></body></html>